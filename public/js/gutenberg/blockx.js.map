{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/arrayLikeToArray/index.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithHoles/index.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles/index.js","webpack:///./node_modules/@babel/runtime/helpers/asyncToGenerator/index.js","webpack:///./node_modules/@babel/runtime/helpers/defineProperty/index.js","webpack:///./node_modules/@babel/runtime/helpers/extends/index.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray/index.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArrayLimit/index.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableRest/index.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread/index.js","webpack:///./node_modules/@babel/runtime/helpers/objectWithoutProperties/index.js","webpack:///./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose/index.js","webpack:///./node_modules/@babel/runtime/helpers/slicedToArray/index.js","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray/index.js","webpack:///./node_modules/@babel/runtime/helpers/typeof/index.js","webpack:///./node_modules/@babel/runtime/helpers/unsupportedIterableToArray/index.js","webpack:///./node_modules/dequal/lite/index.mjs","webpack:///./node_modules/swr/esm/cache.js","webpack:///./node_modules/swr/esm/config.js","webpack:///./node_modules/swr/esm/index.js","webpack:///./node_modules/swr/esm/libs/hash.js","webpack:///./node_modules/swr/esm/libs/web-preset.js","webpack:///./node_modules/swr/esm/swr-config-context.js","webpack:///./node_modules/swr/esm/use-swr-infinite.js","webpack:///./node_modules/swr/esm/use-swr.js","webpack:///./src/script/gutenberg.js","webpack:///./src/script/gutenberg/auto/auto-ssr.js","webpack:///./src/script/gutenberg/blocks/block-x.js","webpack:///./src/script/gutenberg/components/BlockContext.js","webpack:///./src/script/gutenberg/components/ServerSideRenderQueue.css","webpack:///./src/script/gutenberg/components/ServerSideRenderQueue.js","webpack:///./src/script/gutenberg/components/content-structure.js","webpack:///./src/script/gutenberg/components/panels.js","webpack:///./src/script/gutenberg/components/widgets/DividerWidget.js","webpack:///./src/script/gutenberg/components/widgets/HiddenWidget.js","webpack:///./src/script/gutenberg/components/widgets/ListOfWidget.css","webpack:///./src/script/gutenberg/components/widgets/ListOfWidget.js","webpack:///./src/script/gutenberg/components/widgets/MediaWidget.css","webpack:///./src/script/gutenberg/components/widgets/MediaWidget.js","webpack:///./src/script/gutenberg/components/widgets/NumberWidget.js","webpack:///./src/script/gutenberg/components/widgets/PostWidget.css","webpack:///./src/script/gutenberg/components/widgets/PostWidget.js","webpack:///./src/script/gutenberg/components/widgets/ReadonlyWidget.js","webpack:///./src/script/gutenberg/components/widgets/SelectWidget.js","webpack:///./src/script/gutenberg/components/widgets/TaxQueryWidget.js","webpack:///./src/script/gutenberg/components/widgets/TaxonomyTermWidget.js","webpack:///./src/script/gutenberg/components/widgets/TextWidget.js","webpack:///./src/script/gutenberg/components/widgets/TextareaWidget.js","webpack:///./src/script/gutenberg/components/widgets/ToggleWidget.js","webpack:///./src/script/gutenberg/components/widgets/index.js","webpack:///./src/script/gutenberg/data/store.js","webpack:///./src/script/gutenberg/hooks/use-context.js","webpack:///./src/script/gutenberg/hooks/use-media.js","webpack:///./src/script/gutenberg/hooks/use-posts.js","webpack:///./src/script/gutenberg/hooks/use-settings.js","webpack:///./src/script/gutenberg/hooks/use-store.js","webpack:///./src/script/gutenberg/hooks/use-taxonomy.js","webpack:///./src/script/gutenberg/hooks/use-translation.js","webpack:///./src/script/gutenberg/hooks/use-utils.js","webpack:///./src/script/gutenberg/utils/context.js","webpack:///./src/script/gutenberg/utils/select.js","webpack:///external \"regeneratorRuntime\"","webpack:///external [\"wp\",\"apiFetch\"]","webpack:///external [\"wp\",\"blockEditor\"]","webpack:///external [\"wp\",\"blocks\"]","webpack:///external [\"wp\",\"components\"]","webpack:///external [\"wp\",\"data\"]","webpack:///external [\"wp\",\"element\"]","webpack:///external [\"wp\",\"i18n\"]","webpack:///external \"React\""],"names":["apiFetch","use","options","next","headers","require","select","dispatch","STORE_NAME","setInterval","store","isRequesting","getQueue","length","fetchSSR","getCurrentPostId","BlockXComponents","window","ServerSideRenderQueue","useBlock","BlockX","blocks","id","title","category","registerBlockTypeArgs","contentStructure","defaultValues","defaultValue","key","value","registerBlockType","attributes","content","type","default","edit","props","className","setAttributes","autoSaveTimeout","useAutoSaveTimeout","useState","localChangeState","setLocalChangeState","changeLocalState","_state","useEffect","timeoutId","Object","keys","setTimeout","setContent","clearTimeout","JSON","stringify","Preview","getBlockContext","BlockContext","blockId","localChanges","children","Context","dirtyState","LoadingWrapper","isLoading","block","console","warn","html","useSSR","useIsRequestingBlock","isInRenderQueue","useIsInRenderQueue","sprintf","__","msg","ContentStructure","items","onChange","map","item","index","widgets","Widget","_value","Panels","definition","useTranslation","btn_apply_changes","applyChanges","handleApplyChangesClick","panels","activePanel","label","undefined","opened","push","panel","panelIndex","DividerWidget","HiddenWidget","ListOfWidget","rest","onAdd","newItem","forEach","widget","onClear","onChangeItem","widgetKey","widgetValue","newValue","onSwitchPositions","indexA","indexB","onUp","onDown","onDeleteItem","filter","i","instanceValue","MediaPreviewWrapper","loading","MediaPreview","ID","useTranslationWidgetMedia","not_found","useMedia","media","media_type","media_details","sizes","thumbnail","source_url","rendered","MediaWidget","mediaTypes","multiple","mediaUploadTitle","no_permission","handleSelection","Array","isArray","open","NumberWidget","PostSearchResult","post_title","onClick","SearchPost","post_types","post_status","use_context","onFound","state","setState","isVisible","setIsVisible","useFetchPosts","posts","useEscapeKey","post","LockedPost","post_id","onUnlock","usePost","PostWidget","instance","ReadonlyWidget","SelectWidget","findTermByName","name","terms","find","_t","findTermBySlug","slug","findTermById","findTerm","s","ConditionControl","taxonomies","taxonomy","termIds","operator","useTranslationWidgetTaxQuery","label_taxonomy","label_add_terms","label_operator","taxonomyTerms","useFetchTaxonomyTerms","tax","includes","handleChangeTerms","_terms","newTerms","t","search","_term","taxonomyTerm","buildOption","_operator","ConditionWrapper","background","padding","border","borderRadius","marginBottom","marginLeft","marginRight","ConditionGroup","toggle_AND_description","toggle_OR_description","btn_add_taxonomy","btn_delete_taxonomy","relation","handleChange","_tax","changedTax","c","j","marginTop","checked","width","textAlign","display","TaxQueryWidget","TaxonomyTerm","taxonomyTermOptions","useFetchTaxonomyTermsAsOptionsWithDefaultAny","TextWidget","rows","help","TextareaWidget","getStateLabel","isOn","on","off","ToggleWidget","text","textarea","number","toggle","taxonomy_term","TaxonomyTermWidget","tax_query","hidden","divider","readonly","list_of","SSR_CACHE_KEY","SSR_CACHE_TIMESTAMPS_KEY","getExpiredCache","parse","localStorage","getItem","setExpiredCache","setItem","setCache","expiresInSeconds","now","Date","hash","getCache","expiredMap","validHashes","blocksCache","getHash","btoa","DEFAULT_STATE","queue","SSR_FETCH","path","data","actionNone","ACTION_SET_IS_REQUESTING","actionIsRequesting","ACTION_ADD_TO_QUEUE","actionAddToQueue","ACTION_REMOVE_FROM_QUEUE","actionRemoveFromQueue","hashes","ACTION_SET_BLOCKS","actionSetBlocks","renderedBlocks","actions","addToQueue","getState","result","registerStore","reducer","action","selectors","isInQueue","values","getBlocks","getBlock","controls","method","useContext","mediaCache","mediaFetcher","cachedMedia","useSWR","error","postsCache","postFetcher","cachedPost","postsQueryCache","postsQueryFetcher","cacheKey","buildQueryParams","post_type","join","block_instance","debounced","useDebounce","context","queryParams","query","useSettings","settings","auto_save_timeout","useSelectStore","selector","deps","useSelect","useStoreDispatch","useDispatch","useIsRequesting","getEntityRecords","per_page","term_select_any","component","i18n","delay","debouncedValue","setDebouncedValue","handler","callback","dependencies","enabled","onKeyDown","addEventListener","removeEventListener","Contexts","getContext","initValue","React","createContext"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;AACA;;AAEA,wCAAwC,SAAS;AACjD;AACA;;AAEA;AACA;;AAEA;AACA,6E;;;;;;;;;;;ACXA;AACA;AACA;;AAEA;AACA,6E;;;;;;;;;;;ACLA,uBAAuB,mBAAO,CAAC,gHAAyC;;AAExE;AACA;AACA;;AAEA;AACA,6E;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA;AACA,6E;;;;;;;;;;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA,6E;;;;;;;;;;;AChBA;AACA;AACA,mBAAmB,sBAAsB;AACzC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6E;;;;;;;;;;;ACpBA;AACA;AACA;;AAEA;AACA,6E;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,+BAA+B;AAC5E;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA,6E;;;;;;;;;;;AC5BA;AACA;AACA;;AAEA;AACA,6E;;;;;;;;;;;ACLA;AACA;AACA;;AAEA;AACA,6E;;;;;;;;;;;ACLA,mCAAmC,mBAAO,CAAC,wIAAqD;;AAEhG;AACA;AACA;AACA;;AAEA;AACA;;AAEA,eAAe,6BAA6B;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,6E;;;;;;;;;;;ACtBA;AACA;AACA;AACA;AACA;;AAEA,aAAa,uBAAuB;AACpC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,6E;;;;;;;;;;;AChBA,qBAAqB,mBAAO,CAAC,4GAAuC;;AAEpE,2BAA2B,mBAAO,CAAC,wHAA6C;;AAEhF,iCAAiC,mBAAO,CAAC,oIAAmD;;AAE5F,sBAAsB,mBAAO,CAAC,8GAAwC;;AAEtE;AACA;AACA;;AAEA;AACA,6E;;;;;;;;;;;ACbA,wBAAwB,mBAAO,CAAC,kHAA0C;;AAE1E,sBAAsB,mBAAO,CAAC,8GAAwC;;AAEtE,iCAAiC,mBAAO,CAAC,oIAAmD;;AAE5F,wBAAwB,mBAAO,CAAC,kHAA0C;;AAE1E;AACA;AACA;;AAEA;AACA,6E;;;;;;;;;;;ACbA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,6E;;;;;;;;;;;ACrBA,uBAAuB,mBAAO,CAAC,gHAAyC;;AAExE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6E;;;;;;;;;;;;ACZA;AAAA;AAAA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;AC5BA;AAAA;AAA+B;AAC/B;AACA;AACA,qCAAqC,kBAAkB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,0DAAI;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,gBAAgB;AAC/D;AACA;AACA;AACA;AACA;AACA,CAAC;AACc,oEAAK,EAAC;;;;;;;;;;;;;ACpFrB;AAAA;AAAA;AAAA;AAAA;AAAqC;AACT;AACc;AAC1C;AACA,gBAAgB,8CAAK;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,EAAE;AAClC,4BAA4B,EAAE;AAC9B,0BAA0B,EAAE;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,kDAAM;AACnB,aAAa,wDAAS;AACtB,cAAc,wDAAS;AACvB,uBAAuB,wDAAS;AAChC,2BAA2B,cAAc;AACzC;AACiB;AACF,4EAAa,EAAC;;;;;;;;;;;;;ACpD7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0B;AACoB;AACM;AACnB;AAClB,+GAAM,EAAC;;;;;;;;;;;;;ACJtB;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC5CA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,wCAAwC,mBAAmB,EAAE,EAAE;AAC9E;AACf;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;;;;;;ACrBF;AAAA;AAAA;AAAsC;AACtC,uBAAuB,2DAAa,GAAG;AACvC;AACe,+EAAgB,EAAC;;;;;;;;;;;;;ACHhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AACA,mBAAmB,SAAI,IAAI,SAAI;AAC/B,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA,cAAc,SAAI,IAAI,SAAI;AAC1B;AACA;AACA;AACA;AACA,4DAA4D,cAAc;AAC1E;AACA;AACA;AACA;AACA;AAC6E;AAC7B;AACI;AACrB;AAC/B;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,EAAE,+CAAa,EAAE,wDAAU,CAAC,2DAAgB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,6CAAK;AAC5B;AACA;AACA;AACA;AACA,aAAa,sDAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,6CAAK;AAC9B;AACA,uBAAuB,oDAAM;AAC7B,sBAAsB,oDAAM;AAC5B;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,kBAAkB,oDAAM;AACxB;AACA,cAAc,wDAAM,4DAA4D;AAChF;AACA;AACA;AACA;AACA,yBAAyB,6CAAK,2BAA2B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,6CAAK;AAC9B;AACA;AACA;AACA;AACA,+BAA+B,6CAAK;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,6CAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,6CAAK;AACzB;AACA;AACA;AACA,SAAS;AACT,KAAK,EAAE,EAAE;AACT;AACA,IAAI,uDAAS;AACb;AACA,KAAK;AACL,iBAAiB,yDAAW;AAC5B,0CAA0C,yBAAyB;AACnE;AACA;AACA;AACA,YAAY,6CAAK,uBAAuB,2CAA2C;AACnF;AACA;AACA;AACA,YAAY,6CAAK,uBAAuB,cAAc;AACtD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,kBAAkB,yDAAW;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,6CAAK;AACb,+BAA+B,WAAW,EAAE;AAC5C,oCAAoC,UAAU,EAAE;AAChD,KAAK;AACL;AACA,uBAAuB;AACvB;AACA;AACA,8BAA8B,kBAAkB,EAAE;AAClD;AACA,SAAS;AACT;AACA,8BAA8B,iBAAiB,EAAE;AACjD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,8BAA8B,uBAAuB,EAAE;AACvD;AACA,SAAS;AACT;AACA,8BAA8B,yBAAyB,EAAE;AACzD;AACA;AACA,KAAK;AACL;AACA;AAC0B;;;;;;;;;;;;;ACxO1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB,SAAI,IAAI,SAAI;AAC7B,2BAA2B,+DAA+D,gBAAgB,EAAE,EAAE;AAC9G;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,qFAAqF;AACpH;AACA,KAAK;AACL;AACA,mBAAmB,SAAI,IAAI,SAAI;AAC/B,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACsH;AACtE;AACI;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,yBAAyB,EAAE;AACnF;AACA;AACA;AACA,4CAA4C,+CAAS,GAAG,qDAAe;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,aAAa;AACrC,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,+CAAa,yBAAyB,+CAAa;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,yCAAyC,EAAE;AAC1G,kDAAkD,yCAAyC,EAAE;AAC7F;AACA,mDAAmD,6CAA6C,EAAE;AAClG;AACA;AACA,sCAAsC,yBAAyB;AAC/D;AACA;AACA,aAAa,6CAAK;AAClB;AACA;AACA;AACA;AACA,0BAA0B,6CAAK;AAC/B,2BAA2B,6CAAK;AAChC,kCAAkC,6CAAK;AACvC;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA,uDAAuD,QAAQ,6CAAK,UAAU,EAAE;AAChF;AACA,2BAA2B,6CAAK;AAChC;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA,sCAAsC,yBAAyB;AAC/D;AACA;AACA;AACA;AACA;AACA,yBAAyB,6CAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,6CAAK;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,6CAAK;AAC7B;AACA;AACA,oBAAoB,6CAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,qBAAqB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,6CAAK;AAC5C,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,6CAAK;AAClB,6BAA6B,EAAE,+CAAa,EAAE,wDAAU,CAAC,2DAAgB;AACzE,oBAAoB,oDAAM;AAC1B;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,yBAAyB,6CAAK;AAC9B;AACA;AACA;AACA,uBAAuB,6CAAK;AAC5B,gCAAgC,6CAAK;AACrC;AACA;AACA;AACA,4BAA4B,oDAAM;AAClC;AACA;AACA;AACA,KAAK;AACL,mBAAmB,oDAAM;AACzB;AACA;AACA;AACA,KAAK;AACL;AACA,IAAI,2DAAa;AACjB,aAAa,sDAAQ;AACrB,mBAAmB,yDAAW;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,uBAAuB,oDAAM;AAC7B,iBAAiB,oDAAM;AACvB;AACA,4BAA4B,oDAAM;AAClC;AACA,yBAAyB,yDAAW;AACpC;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,sBAAsB,yDAAW;AACjC;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,yDAAW;AAChC,wCAAwC,qBAAqB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,gBAAgB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,wBAAwB,6CAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,6CAAK;AAC3D;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,sBAAsB;AAC5D;AACA;AACA,wBAAwB,6CAAK;AAC7B,wBAAwB,6CAAK;AAC7B,wBAAwB,6CAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,wBAAwB,6CAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0GAA0G,eAAe,mBAAmB,yBAAyB;AACrK;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,iBAAiB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,wBAAwB;AAC9C;AACA;AACA,0CAA0C,oBAAoB,eAAe,EAAE;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,0BAA0B,EAAE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,yBAAyB;AACvE,oCAAoC,eAAe;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,aAAa;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,eAAe;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS,EAAE;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,qDAAO;AAC/B,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,yBAAyB,6CAAK;AAC9B,0BAA0B,6CAAK;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,2DAAgB;AACM;AACvB,qEAAM,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnuBtB;AAEAA,2DAAQ,CAACC,GAAT,CAAa,UAACC,OAAD,EAAUC,IAAV,EAAiB;AAC1BD,SAAO,CAACE,OAAR,mCACQF,OAAO,CAACE,OAAR,IAAmB,EAD3B,wFAEK,gBAFL,EAEwB,IAFxB;AAIA,SAAOD,IAAI,CAACD,OAAD,CAAX;AACH,CAND;AAQA;;;;;;;;;;;;eCT6BG,mBAAO,CAAC,wCAAD,C;IAA5BC,M,YAAAA,M;IAAQC,Q,YAAAA,Q;;gBACOF,mBAAO,CAAC,2DAAD,C;IAAtBG,U,aAAAA,U;;AAERC,WAAW,CAAC,YAAI;AACZ,MAAMC,KAAK,GAAGJ,MAAM,CAACE,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","file":"blockx.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/script/gutenberg.js\");\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayLikeToArray = require(\"@babel/runtime/helpers/arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var objectWithoutPropertiesLoose = require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayWithHoles = require(\"@babel/runtime/helpers/arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"@babel/runtime/helpers/iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"@babel/runtime/helpers/unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"@babel/runtime/helpers/nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayWithoutHoles = require(\"@babel/runtime/helpers/arrayWithoutHoles\");\n\nvar iterableToArray = require(\"@babel/runtime/helpers/iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"@babel/runtime/helpers/unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"@babel/runtime/helpers/nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayLikeToArray = require(\"@babel/runtime/helpers/arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var has = Object.prototype.hasOwnProperty;\n\nexport function dequal(foo, bar) {\n\tvar ctor, len;\n\tif (foo === bar) return true;\n\n\tif (foo && bar && (ctor=foo.constructor) === bar.constructor) {\n\t\tif (ctor === Date) return foo.getTime() === bar.getTime();\n\t\tif (ctor === RegExp) return foo.toString() === bar.toString();\n\n\t\tif (ctor === Array) {\n\t\t\tif ((len=foo.length) === bar.length) {\n\t\t\t\twhile (len-- && dequal(foo[len], bar[len]));\n\t\t\t}\n\t\t\treturn len === -1;\n\t\t}\n\n\t\tif (!ctor || typeof foo === 'object') {\n\t\t\tlen = 0;\n\t\t\tfor (ctor in foo) {\n\t\t\t\tif (has.call(foo, ctor) && ++len && !has.call(bar, ctor)) return false;\n\t\t\t\tif (!(ctor in bar) || !dequal(foo[ctor], bar[ctor])) return false;\n\t\t\t}\n\t\t\treturn Object.keys(bar).length === len;\n\t\t}\n\t}\n\n\treturn foo !== foo && bar !== bar;\n}\n","import hash from './libs/hash';\nvar Cache = /** @class */ (function () {\n    function Cache(initialData) {\n        if (initialData === void 0) { initialData = {}; }\n        this.__cache = new Map(Object.entries(initialData));\n        this.__listeners = [];\n    }\n    Cache.prototype.get = function (key) {\n        var _key = this.serializeKey(key)[0];\n        return this.__cache.get(_key);\n    };\n    Cache.prototype.set = function (key, value) {\n        var _key = this.serializeKey(key)[0];\n        this.__cache.set(_key, value);\n        this.notify();\n    };\n    Cache.prototype.keys = function () {\n        return Array.from(this.__cache.keys());\n    };\n    Cache.prototype.has = function (key) {\n        var _key = this.serializeKey(key)[0];\n        return this.__cache.has(_key);\n    };\n    Cache.prototype.clear = function () {\n        this.__cache.clear();\n        this.notify();\n    };\n    Cache.prototype.delete = function (key) {\n        var _key = this.serializeKey(key)[0];\n        this.__cache.delete(_key);\n        this.notify();\n    };\n    // TODO: introduce namespace for the cache\n    Cache.prototype.serializeKey = function (key) {\n        var args = null;\n        if (typeof key === 'function') {\n            try {\n                key = key();\n            }\n            catch (err) {\n                // dependencies not ready\n                key = '';\n            }\n        }\n        if (Array.isArray(key)) {\n            // args array\n            args = key;\n            key = hash(key);\n        }\n        else {\n            // convert null to ''\n            key = String(key || '');\n        }\n        var errorKey = key ? 'err@' + key : '';\n        var isValidatingKey = key ? 'validating@' + key : '';\n        return [key, args, errorKey, isValidatingKey];\n    };\n    Cache.prototype.subscribe = function (listener) {\n        var _this = this;\n        if (typeof listener !== 'function') {\n            throw new Error('Expected the listener to be a function.');\n        }\n        var isSubscribed = true;\n        this.__listeners.push(listener);\n        return function () {\n            if (!isSubscribed)\n                return;\n            isSubscribed = false;\n            var index = _this.__listeners.indexOf(listener);\n            if (index > -1) {\n                _this.__listeners[index] = _this.__listeners[_this.__listeners.length - 1];\n                _this.__listeners.length--;\n            }\n        };\n    };\n    // Notify Cache subscribers about a change in the cache\n    Cache.prototype.notify = function () {\n        for (var _i = 0, _a = this.__listeners; _i < _a.length; _i++) {\n            var listener = _a[_i];\n            listener();\n        }\n    };\n    return Cache;\n}());\nexport default Cache;\n","import { dequal } from 'dequal/lite';\nimport Cache from './cache';\nimport webPreset from './libs/web-preset';\n// cache\nvar cache = new Cache();\n// error retry\nfunction onErrorRetry(_, __, config, revalidate, opts) {\n    if (!config.isDocumentVisible()) {\n        // if it's hidden, stop\n        // it will auto revalidate when focus\n        return;\n    }\n    if (typeof config.errorRetryCount === 'number' &&\n        opts.retryCount > config.errorRetryCount) {\n        return;\n    }\n    // exponential backoff\n    var count = Math.min(opts.retryCount || 0, 8);\n    var timeout = ~~((Math.random() + 0.5) * (1 << count)) * config.errorRetryInterval;\n    setTimeout(revalidate, timeout, opts);\n}\n// client side: need to adjust the config\n// based on the browser status\n// slow connection (<= 70Kbps)\nvar slowConnection = typeof window !== 'undefined' &&\n    navigator['connection'] &&\n    ['slow-2g', '2g'].indexOf(navigator['connection'].effectiveType) !== -1;\n// config\nvar defaultConfig = {\n    // events\n    onLoadingSlow: function () { },\n    onSuccess: function () { },\n    onError: function () { },\n    onErrorRetry: onErrorRetry,\n    errorRetryInterval: (slowConnection ? 10 : 5) * 1000,\n    focusThrottleInterval: 5 * 1000,\n    dedupingInterval: 2 * 1000,\n    loadingTimeout: (slowConnection ? 5 : 3) * 1000,\n    refreshInterval: 0,\n    revalidateOnFocus: true,\n    revalidateOnReconnect: true,\n    refreshWhenHidden: false,\n    refreshWhenOffline: false,\n    shouldRetryOnError: true,\n    suspense: false,\n    compare: dequal,\n    fetcher: webPreset.fetcher,\n    isOnline: webPreset.isOnline,\n    isDocumentVisible: webPreset.isDocumentVisible,\n    isPaused: function () { return false; }\n};\nexport { cache };\nexport default defaultConfig;\n","export * from './use-swr';\nimport { default as useSWR } from './use-swr';\nexport { useSWRInfinite } from './use-swr-infinite';\nexport { cache } from './config';\nexport default useSWR;\n","// use WeakMap to store the object->key mapping\n// so the objects can be garbage collected.\n// WeakMap uses a hashtable under the hood, so the lookup\n// complexity is almost O(1).\nvar table = new WeakMap();\n// counter of the key\nvar counter = 0;\n// hashes an array of objects and returns a string\nexport default function hash(args) {\n    if (!args.length)\n        return '';\n    var key = 'arg';\n    for (var i = 0; i < args.length; ++i) {\n        if (args[i] === null) {\n            key += '@null';\n            continue;\n        }\n        var _hash = void 0;\n        if (typeof args[i] !== 'object' && typeof args[i] !== 'function') {\n            // need to consider the case that args[i] is a string:\n            // args[i]        _hash\n            // \"undefined\" -> '\"undefined\"'\n            // undefined   -> 'undefined'\n            // 123         -> '123'\n            // \"null\"      -> '\"null\"'\n            if (typeof args[i] === 'string') {\n                _hash = '\"' + args[i] + '\"';\n            }\n            else {\n                _hash = String(args[i]);\n            }\n        }\n        else {\n            if (!table.has(args[i])) {\n                _hash = counter;\n                table.set(args[i], counter++);\n            }\n            else {\n                _hash = table.get(args[i]);\n            }\n        }\n        key += '@' + _hash;\n    }\n    return key;\n}\n","function isOnline() {\n    if (typeof navigator !== 'undefined' &&\n        typeof navigator.onLine !== 'undefined') {\n        return navigator.onLine;\n    }\n    // always assume it's online\n    return true;\n}\nfunction isDocumentVisible() {\n    if (typeof document !== 'undefined' &&\n        typeof document.visibilityState !== 'undefined') {\n        return document.visibilityState !== 'hidden';\n    }\n    // always assume it's visible\n    return true;\n}\nvar fetcher = function (url) { return fetch(url).then(function (res) { return res.json(); }); };\nexport default {\n    isOnline: isOnline,\n    isDocumentVisible: isDocumentVisible,\n    fetcher: fetcher\n};\n","import { createContext } from 'react';\nvar SWRConfigContext = createContext({});\nSWRConfigContext.displayName = 'SWRConfigContext';\nexport default SWRConfigContext;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { useContext, useRef, useState, useEffect, useCallback } from 'react';\nimport defaultConfig, { cache } from './config';\nimport SWRConfigContext from './swr-config-context';\nimport useSWR from './use-swr';\nfunction useSWRInfinite() {\n    var _this = this;\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var getKey, fn, config = {};\n    if (args.length >= 1) {\n        getKey = args[0];\n    }\n    if (args.length > 2) {\n        fn = args[1];\n        config = args[2];\n    }\n    else {\n        if (typeof args[1] === 'function') {\n            fn = args[1];\n        }\n        else if (typeof args[1] === 'object') {\n            config = args[1];\n        }\n    }\n    config = Object.assign({}, defaultConfig, useContext(SWRConfigContext), config);\n    var _a = config.initialSize, initialSize = _a === void 0 ? 1 : _a, _b = config.revalidateAll, revalidateAll = _b === void 0 ? false : _b, _c = config.persistSize, persistSize = _c === void 0 ? false : _c, defaultFetcher = config.fetcher, extraConfig = __rest(config, [\"initialSize\", \"revalidateAll\", \"persistSize\", \"fetcher\"]);\n    if (typeof fn === 'undefined') {\n        // use the global fetcher\n        // we have to convert the type here\n        fn = defaultFetcher;\n    }\n    // get the serialized key of the first page\n    var firstPageKey = null;\n    try {\n        ;\n        firstPageKey = cache.serializeKey(getKey(0, null))[0];\n    }\n    catch (err) {\n        // not ready\n    }\n    var _d = useState(false), rerender = _d[1];\n    // we use cache to pass extra info (context) to fetcher so it can be globally shared\n    // here we get the key of the fetcher context cache\n    var contextCacheKey = null;\n    if (firstPageKey) {\n        contextCacheKey = 'context@' + firstPageKey;\n    }\n    // page count is cached as well, so when navigating the list can be restored\n    var pageCountCacheKey = null;\n    var cachedPageSize;\n    if (firstPageKey) {\n        pageCountCacheKey = 'size@' + firstPageKey;\n        cachedPageSize = cache.get(pageCountCacheKey);\n    }\n    var pageCountRef = useRef(cachedPageSize || initialSize);\n    var didMountRef = useRef(false);\n    // every time the key changes, we reset the page size if it's not persisted\n    useEffect(function () {\n        if (didMountRef.current) {\n            if (!persistSize) {\n                pageCountRef.current = initialSize;\n            }\n        }\n        else {\n            didMountRef.current = true;\n        }\n        // initialSize isn't allowed to change during the lifecycle\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [firstPageKey]);\n    // keep the data inside a ref\n    var dataRef = useRef();\n    // actual swr of all pages\n    var swr = useSWR(firstPageKey ? ['many', firstPageKey] : null, function () { return __awaiter(_this, void 0, void 0, function () {\n        var _a, originalData, force, data, previousPageData, i, _b, pageKey, pageArgs, pageData, shouldFetchPage;\n        return __generator(this, function (_c) {\n            switch (_c.label) {\n                case 0:\n                    _a = cache.get(contextCacheKey) || {}, originalData = _a.originalData, force = _a.force;\n                    data = [];\n                    previousPageData = null;\n                    i = 0;\n                    _c.label = 1;\n                case 1:\n                    if (!(i < pageCountRef.current)) return [3 /*break*/, 8];\n                    _b = cache.serializeKey(getKey(i, previousPageData)), pageKey = _b[0], pageArgs = _b[1];\n                    if (!pageKey) {\n                        // pageKey is falsy, stop fetching next pages\n                        return [3 /*break*/, 8];\n                    }\n                    pageData = cache.get(pageKey);\n                    shouldFetchPage = revalidateAll ||\n                        force ||\n                        typeof pageData === 'undefined' ||\n                        (typeof force === 'undefined' &&\n                            i === 0 &&\n                            typeof dataRef.current !== 'undefined') ||\n                        (originalData && !config.compare(originalData[i], pageData));\n                    if (!shouldFetchPage) return [3 /*break*/, 6];\n                    if (!(pageArgs !== null)) return [3 /*break*/, 3];\n                    return [4 /*yield*/, fn.apply(void 0, pageArgs)];\n                case 2:\n                    pageData = _c.sent();\n                    return [3 /*break*/, 5];\n                case 3: return [4 /*yield*/, fn(pageKey)];\n                case 4:\n                    pageData = _c.sent();\n                    _c.label = 5;\n                case 5:\n                    cache.set(pageKey, pageData);\n                    _c.label = 6;\n                case 6:\n                    data.push(pageData);\n                    previousPageData = pageData;\n                    _c.label = 7;\n                case 7:\n                    ++i;\n                    return [3 /*break*/, 1];\n                case 8:\n                    // once we executed the data fetching based on the context, clear the context\n                    cache.delete(contextCacheKey);\n                    // return the data\n                    return [2 /*return*/, data];\n            }\n        });\n    }); }, extraConfig);\n    // update dataRef\n    useEffect(function () {\n        dataRef.current = swr.data;\n    }, [swr.data]);\n    var mutate = useCallback(function (data, shouldRevalidate) {\n        if (shouldRevalidate === void 0) { shouldRevalidate = true; }\n        if (shouldRevalidate && typeof data !== 'undefined') {\n            // we only revalidate the pages that are changed\n            var originalData = dataRef.current;\n            cache.set(contextCacheKey, { originalData: originalData, force: false });\n        }\n        else if (shouldRevalidate) {\n            // calling `mutate()`, we revalidate all pages\n            cache.set(contextCacheKey, { force: true });\n        }\n        return swr.mutate(data, shouldRevalidate);\n    }, \n    // swr.mutate is always the same reference\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [contextCacheKey]);\n    // extend the SWR API\n    var size = pageCountRef.current;\n    var setSize = useCallback(function (arg) {\n        if (typeof arg === 'function') {\n            pageCountRef.current = arg(pageCountRef.current);\n        }\n        else if (typeof arg === 'number') {\n            pageCountRef.current = arg;\n        }\n        cache.set(pageCountCacheKey, pageCountRef.current);\n        rerender(function (v) { return !v; });\n        return mutate(function (v) { return v; });\n    }, [mutate, pageCountCacheKey]);\n    // Use getter functions to avoid unnecessary re-renders caused by triggering all the getters of the returned swr object\n    var swrInfinite = { size: size, setSize: setSize, mutate: mutate };\n    Object.defineProperties(swrInfinite, {\n        error: {\n            get: function () { return swr.error; },\n            enumerable: true\n        },\n        data: {\n            get: function () { return swr.data; },\n            enumerable: true\n        },\n        // revalidate will be deprecated in the 1.x release\n        // because mutate() covers the same use case of revalidate().\n        // This remains only for backward compatibility\n        revalidate: {\n            get: function () { return swr.revalidate; },\n            enumerable: true\n        },\n        isValidating: {\n            get: function () { return swr.isValidating; },\n            enumerable: true\n        }\n    });\n    return swrInfinite;\n}\nexport { useSWRInfinite };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { useCallback, useContext, useEffect, useLayoutEffect, useState, useRef, useMemo, useDebugValue } from 'react';\nimport defaultConfig, { cache } from './config';\nimport SWRConfigContext from './swr-config-context';\nvar IS_SERVER = typeof window === 'undefined' ||\n    // @ts-ignore\n    !!(typeof Deno !== 'undefined' && Deno && Deno.version && Deno.version.deno);\n// polyfill for requestAnimationFrame\nvar rAF = IS_SERVER\n    ? null\n    : window['requestAnimationFrame'] || (function (f) { return setTimeout(f, 1); });\n// React currently throws a warning when using useLayoutEffect on the server.\n// To get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser.\nvar useIsomorphicLayoutEffect = IS_SERVER ? useEffect : useLayoutEffect;\n// global state managers\nvar CONCURRENT_PROMISES = {};\nvar CONCURRENT_PROMISES_TS = {};\nvar FOCUS_REVALIDATORS = {};\nvar RECONNECT_REVALIDATORS = {};\nvar CACHE_REVALIDATORS = {};\nvar MUTATION_TS = {};\nvar MUTATION_END_TS = {};\n// generate strictly increasing timestamps\nvar now = (function () {\n    var ts = 0;\n    return function () { return ++ts; };\n})();\n// setup DOM events listeners for `focus` and `reconnect` actions\nif (!IS_SERVER &&\n    window.addEventListener &&\n    typeof document !== 'undefined' &&\n    typeof document.addEventListener !== 'undefined') {\n    var revalidate_1 = function (revalidators) {\n        if (!defaultConfig.isDocumentVisible() || !defaultConfig.isOnline())\n            return;\n        for (var key in revalidators) {\n            if (revalidators[key][0])\n                revalidators[key][0]();\n        }\n    };\n    // focus revalidate\n    document.addEventListener('visibilitychange', function () { return revalidate_1(FOCUS_REVALIDATORS); }, false);\n    window.addEventListener('focus', function () { return revalidate_1(FOCUS_REVALIDATORS); }, false);\n    // reconnect revalidate\n    window.addEventListener('online', function () { return revalidate_1(RECONNECT_REVALIDATORS); }, false);\n}\nvar trigger = function (_key, shouldRevalidate) {\n    if (shouldRevalidate === void 0) { shouldRevalidate = true; }\n    // we are ignoring the second argument which correspond to the arguments\n    // the fetcher will receive when key is an array\n    var _a = cache.serializeKey(_key), key = _a[0], keyErr = _a[2], keyValidating = _a[3];\n    if (!key)\n        return Promise.resolve();\n    var updaters = CACHE_REVALIDATORS[key];\n    if (key && updaters) {\n        var currentData = cache.get(key);\n        var currentError = cache.get(keyErr);\n        var currentIsValidating = cache.get(keyValidating);\n        var promises = [];\n        for (var i = 0; i < updaters.length; ++i) {\n            promises.push(updaters[i](shouldRevalidate, currentData, currentError, currentIsValidating, i > 0));\n        }\n        // return new updated value\n        return Promise.all(promises).then(function () { return cache.get(key); });\n    }\n    return Promise.resolve(cache.get(key));\n};\nvar broadcastState = function (key, data, error, isValidating) {\n    var updaters = CACHE_REVALIDATORS[key];\n    if (key && updaters) {\n        for (var i = 0; i < updaters.length; ++i) {\n            updaters[i](false, data, error, isValidating);\n        }\n    }\n};\nvar mutate = function (_key, _data, shouldRevalidate) {\n    if (shouldRevalidate === void 0) { shouldRevalidate = true; }\n    return __awaiter(void 0, void 0, void 0, function () {\n        var _a, key, keyErr, beforeMutationTs, beforeConcurrentPromisesTs, data, error, isAsyncMutation, err_1, shouldAbort, updaters, promises, i;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _a = cache.serializeKey(_key), key = _a[0], keyErr = _a[2];\n                    if (!key)\n                        return [2 /*return*/];\n                    // if there is no new data to update, let's just revalidate the key\n                    if (typeof _data === 'undefined')\n                        return [2 /*return*/, trigger(_key, shouldRevalidate)\n                            // update global timestamps\n                        ];\n                    // update global timestamps\n                    MUTATION_TS[key] = now() - 1;\n                    MUTATION_END_TS[key] = 0;\n                    beforeMutationTs = MUTATION_TS[key];\n                    beforeConcurrentPromisesTs = CONCURRENT_PROMISES_TS[key];\n                    isAsyncMutation = false;\n                    if (_data && typeof _data === 'function') {\n                        // `_data` is a function, call it passing current cache value\n                        try {\n                            _data = _data(cache.get(key));\n                        }\n                        catch (err) {\n                            error = err;\n                        }\n                    }\n                    if (!(_data && typeof _data.then === 'function')) return [3 /*break*/, 5];\n                    // `_data` is a promise\n                    isAsyncMutation = true;\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, _data];\n                case 2:\n                    data = _b.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    err_1 = _b.sent();\n                    error = err_1;\n                    return [3 /*break*/, 4];\n                case 4: return [3 /*break*/, 6];\n                case 5:\n                    data = _data;\n                    _b.label = 6;\n                case 6:\n                    shouldAbort = function () {\n                        // check if other mutations have occurred since we've started this mutation\n                        if (beforeMutationTs !== MUTATION_TS[key] ||\n                            beforeConcurrentPromisesTs !== CONCURRENT_PROMISES_TS[key]) {\n                            if (error)\n                                throw error;\n                            return true;\n                        }\n                    };\n                    // if there's a race we don't update cache or broadcast change, just return the data\n                    if (shouldAbort())\n                        return [2 /*return*/, data];\n                    if (typeof data !== 'undefined') {\n                        // update cached data\n                        cache.set(key, data);\n                    }\n                    // always update or reset the error\n                    cache.set(keyErr, error);\n                    // reset the timestamp to mark the mutation has ended\n                    MUTATION_END_TS[key] = now() - 1;\n                    if (!!isAsyncMutation) return [3 /*break*/, 8];\n                    // let's always broadcast in the next tick\n                    // to dedupe synchronous mutation calls\n                    // check out https://github.com/vercel/swr/pull/735 for more details\n                    return [4 /*yield*/, 0\n                        // we skip broadcasting if there's another mutation happened synchronously\n                    ];\n                case 7:\n                    // let's always broadcast in the next tick\n                    // to dedupe synchronous mutation calls\n                    // check out https://github.com/vercel/swr/pull/735 for more details\n                    _b.sent();\n                    // we skip broadcasting if there's another mutation happened synchronously\n                    if (shouldAbort())\n                        return [2 /*return*/, data];\n                    _b.label = 8;\n                case 8:\n                    updaters = CACHE_REVALIDATORS[key];\n                    if (updaters) {\n                        promises = [];\n                        for (i = 0; i < updaters.length; ++i) {\n                            promises.push(updaters[i](!!shouldRevalidate, data, error, undefined, i > 0));\n                        }\n                        // return new updated value\n                        return [2 /*return*/, Promise.all(promises).then(function () {\n                                if (error)\n                                    throw error;\n                                return cache.get(key);\n                            })];\n                    }\n                    // throw error or return data to be used by caller of mutate\n                    if (error)\n                        throw error;\n                    return [2 /*return*/, data];\n            }\n        });\n    });\n};\nfunction useSWR() {\n    var _this = this;\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var _key, fn, config = {};\n    if (args.length >= 1) {\n        _key = args[0];\n    }\n    if (args.length > 2) {\n        fn = args[1];\n        config = args[2];\n    }\n    else {\n        if (typeof args[1] === 'function') {\n            fn = args[1];\n        }\n        else if (typeof args[1] === 'object') {\n            config = args[1];\n        }\n    }\n    // we assume `key` as the identifier of the request\n    // `key` can change but `fn` shouldn't\n    // (because `revalidate` only depends on `key`)\n    // `keyErr` is the cache key for error objects\n    var _a = cache.serializeKey(_key), key = _a[0], fnArgs = _a[1], keyErr = _a[2], keyValidating = _a[3];\n    config = Object.assign({}, defaultConfig, useContext(SWRConfigContext), config);\n    var configRef = useRef(config);\n    useIsomorphicLayoutEffect(function () {\n        configRef.current = config;\n    });\n    if (typeof fn === 'undefined') {\n        // use the global fetcher\n        fn = config.fetcher;\n    }\n    var resolveData = function () {\n        var cachedData = cache.get(key);\n        return typeof cachedData === 'undefined' ? config.initialData : cachedData;\n    };\n    var initialData = resolveData();\n    var initialError = cache.get(keyErr);\n    var initialIsValidating = !!cache.get(keyValidating);\n    // if a state is accessed (data, error or isValidating),\n    // we add the state to dependencies so if the state is\n    // updated in the future, we can trigger a rerender\n    var stateDependencies = useRef({\n        data: false,\n        error: false,\n        isValidating: false\n    });\n    var stateRef = useRef({\n        data: initialData,\n        error: initialError,\n        isValidating: initialIsValidating\n    });\n    // display the data label in the React DevTools next to SWR hooks\n    useDebugValue(stateRef.current.data);\n    var _b = useState(null), rerender = _b[1];\n    var dispatch = useCallback(function (payload) {\n        var shouldUpdateState = false;\n        for (var k in payload) {\n            if (stateRef.current[k] === payload[k]) {\n                continue;\n            }\n            stateRef.current[k] = payload[k];\n            if (stateDependencies.current[k]) {\n                shouldUpdateState = true;\n            }\n        }\n        if (shouldUpdateState || config.suspense) {\n            // if component is unmounted, should skip rerender\n            // if component is not mounted, should skip rerender\n            if (unmountedRef.current || !initialMountedRef.current)\n                return;\n            rerender({});\n        }\n    }, \n    // config.suspense isn't allowed to change during the lifecycle\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []);\n    // error ref inside revalidate (is last request errored?)\n    var unmountedRef = useRef(false);\n    var keyRef = useRef(key);\n    // check if component is mounted in suspense mode\n    var initialMountedRef = useRef(false);\n    // do unmount check for callbacks\n    var eventsCallback = useCallback(function (event) {\n        var _a;\n        var params = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            params[_i - 1] = arguments[_i];\n        }\n        if (unmountedRef.current)\n            return;\n        if (!initialMountedRef.current)\n            return;\n        if (key !== keyRef.current)\n            return;\n        (_a = configRef.current)[event].apply(_a, params);\n    }, [key]);\n    var boundMutate = useCallback(function (data, shouldRevalidate) {\n        return mutate(keyRef.current, data, shouldRevalidate);\n    }, []);\n    var addRevalidator = function (revalidators, callback) {\n        if (!callback)\n            return;\n        if (!revalidators[key]) {\n            revalidators[key] = [callback];\n        }\n        else {\n            revalidators[key].push(callback);\n        }\n    };\n    var removeRevalidator = function (revlidators, callback) {\n        if (revlidators[key]) {\n            var revalidators = revlidators[key];\n            var index = revalidators.indexOf(callback);\n            if (index >= 0) {\n                // 10x faster than splice\n                // https://jsperf.com/array-remove-by-index\n                revalidators[index] = revalidators[revalidators.length - 1];\n                revalidators.pop();\n            }\n        }\n    };\n    // start a revalidation\n    var revalidate = useCallback(function (revalidateOpts) {\n        if (revalidateOpts === void 0) { revalidateOpts = {}; }\n        return __awaiter(_this, void 0, void 0, function () {\n            var loading, shouldDeduping, newData, startAt, newState, err_2, retryCount;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!key || !fn)\n                            return [2 /*return*/, false];\n                        if (unmountedRef.current)\n                            return [2 /*return*/, false];\n                        if (configRef.current.isPaused())\n                            return [2 /*return*/, false];\n                        revalidateOpts = Object.assign({ dedupe: false }, revalidateOpts);\n                        loading = true;\n                        shouldDeduping = typeof CONCURRENT_PROMISES[key] !== 'undefined' && revalidateOpts.dedupe;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 6, , 7]);\n                        dispatch({\n                            isValidating: true\n                        });\n                        cache.set(keyValidating, true);\n                        if (!shouldDeduping) {\n                            // also update other hooks\n                            broadcastState(key, stateRef.current.data, stateRef.current.error, true);\n                        }\n                        newData = void 0;\n                        startAt = void 0;\n                        if (!shouldDeduping) return [3 /*break*/, 3];\n                        // there's already an ongoing request,\n                        // this one needs to be deduplicated.\n                        startAt = CONCURRENT_PROMISES_TS[key];\n                        return [4 /*yield*/, CONCURRENT_PROMISES[key]];\n                    case 2:\n                        newData = _a.sent();\n                        return [3 /*break*/, 5];\n                    case 3:\n                        // if no cache being rendered currently (it shows a blank page),\n                        // we trigger the loading slow event.\n                        if (config.loadingTimeout && !cache.get(key)) {\n                            setTimeout(function () {\n                                if (loading)\n                                    eventsCallback('onLoadingSlow', key, config);\n                            }, config.loadingTimeout);\n                        }\n                        if (fnArgs !== null) {\n                            CONCURRENT_PROMISES[key] = fn.apply(void 0, fnArgs);\n                        }\n                        else {\n                            CONCURRENT_PROMISES[key] = fn(key);\n                        }\n                        CONCURRENT_PROMISES_TS[key] = startAt = now();\n                        return [4 /*yield*/, CONCURRENT_PROMISES[key]];\n                    case 4:\n                        newData = _a.sent();\n                        setTimeout(function () {\n                            delete CONCURRENT_PROMISES[key];\n                            delete CONCURRENT_PROMISES_TS[key];\n                        }, config.dedupingInterval);\n                        // trigger the success event,\n                        // only do this for the original request.\n                        eventsCallback('onSuccess', newData, key, config);\n                        _a.label = 5;\n                    case 5:\n                        // if there're other ongoing request(s), started after the current one,\n                        // we need to ignore the current one to avoid possible race conditions:\n                        //   req1------------------>res1        (current one)\n                        //        req2---------------->res2\n                        // the request that fired later will always be kept.\n                        if (CONCURRENT_PROMISES_TS[key] > startAt) {\n                            return [2 /*return*/, false];\n                        }\n                        // if there're other mutations(s), overlapped with the current revalidation:\n                        // case 1:\n                        //   req------------------>res\n                        //       mutate------>end\n                        // case 2:\n                        //         req------------>res\n                        //   mutate------>end\n                        // case 3:\n                        //   req------------------>res\n                        //       mutate-------...---------->\n                        // we have to ignore the revalidation result (res) because it's no longer fresh.\n                        // meanwhile, a new revalidation should be triggered when the mutation ends.\n                        if (MUTATION_TS[key] &&\n                            // case 1\n                            (startAt <= MUTATION_TS[key] ||\n                                // case 2\n                                startAt <= MUTATION_END_TS[key] ||\n                                // case 3\n                                MUTATION_END_TS[key] === 0)) {\n                            dispatch({ isValidating: false });\n                            return [2 /*return*/, false];\n                        }\n                        cache.set(key, newData);\n                        cache.set(keyErr, undefined);\n                        cache.set(keyValidating, false);\n                        newState = {\n                            isValidating: false\n                        };\n                        if (typeof stateRef.current.error !== 'undefined') {\n                            // we don't have an error\n                            newState.error = undefined;\n                        }\n                        if (!config.compare(stateRef.current.data, newData)) {\n                            // deep compare to avoid extra re-render\n                            // data changed\n                            newState.data = newData;\n                        }\n                        // merge the new state\n                        dispatch(newState);\n                        if (!shouldDeduping) {\n                            // also update other hooks\n                            broadcastState(key, newData, newState.error, false);\n                        }\n                        return [3 /*break*/, 7];\n                    case 6:\n                        err_2 = _a.sent();\n                        delete CONCURRENT_PROMISES[key];\n                        delete CONCURRENT_PROMISES_TS[key];\n                        if (configRef.current.isPaused()) {\n                            dispatch({\n                                isValidating: false\n                            });\n                            return [2 /*return*/, false];\n                        }\n                        cache.set(keyErr, err_2);\n                        // get a new error\n                        // don't use deep equal for errors\n                        if (stateRef.current.error !== err_2) {\n                            // we keep the stale data\n                            dispatch({\n                                isValidating: false,\n                                error: err_2\n                            });\n                            if (!shouldDeduping) {\n                                // also broadcast to update other hooks\n                                broadcastState(key, undefined, err_2, false);\n                            }\n                        }\n                        // events and retry\n                        eventsCallback('onError', err_2, key, config);\n                        if (config.shouldRetryOnError) {\n                            retryCount = (revalidateOpts.retryCount || 0) + 1;\n                            eventsCallback('onErrorRetry', err_2, key, config, revalidate, Object.assign({ dedupe: true }, revalidateOpts, { retryCount: retryCount }));\n                        }\n                        return [3 /*break*/, 7];\n                    case 7:\n                        loading = false;\n                        return [2 /*return*/, true];\n                }\n            });\n        });\n    }, \n    // dispatch is immutable, and `eventsCallback`, `fnArgs`, `keyErr`, and `keyValidating` are based on `key`,\n    // so we can them from the deps array.\n    //\n    // FIXME:\n    // `fn` and `config` might be changed during the lifecycle,\n    // but they might be changed every render like this.\n    // useSWR('key', () => fetch('/api/'), { suspense: true })\n    // So we omit the values from the deps array\n    // even though it might cause unexpected behaviors.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [key]);\n    // mounted (client side rendering)\n    useIsomorphicLayoutEffect(function () {\n        if (!key)\n            return undefined;\n        // after `key` updates, we need to mark it as mounted\n        unmountedRef.current = false;\n        initialMountedRef.current = true;\n        // after the component is mounted (hydrated),\n        // we need to update the data from the cache\n        // and trigger a revalidation\n        var currentHookData = stateRef.current.data;\n        var latestKeyedData = resolveData();\n        // update the state if the key changed (not the inital render) or cache updated\n        if (keyRef.current !== key) {\n            keyRef.current = key;\n        }\n        if (!config.compare(currentHookData, latestKeyedData)) {\n            dispatch({ data: latestKeyedData });\n        }\n        // revalidate with deduping\n        var softRevalidate = function () { return revalidate({ dedupe: true }); };\n        // trigger a revalidation\n        if (config.revalidateOnMount ||\n            (!config.initialData && config.revalidateOnMount === undefined)) {\n            if (typeof latestKeyedData !== 'undefined' && !IS_SERVER) {\n                // delay revalidate if there's cache\n                // to not block the rendering\n                rAF(softRevalidate);\n            }\n            else {\n                softRevalidate();\n            }\n        }\n        var pending = false;\n        var onFocus = function () {\n            if (pending || !configRef.current.revalidateOnFocus)\n                return;\n            pending = true;\n            softRevalidate();\n            setTimeout(function () { return (pending = false); }, configRef.current.focusThrottleInterval);\n        };\n        var onReconnect = function () {\n            if (configRef.current.revalidateOnReconnect) {\n                softRevalidate();\n            }\n        };\n        // register global cache update listener\n        var onUpdate = function (shouldRevalidate, updatedData, updatedError, updatedIsValidating, dedupe) {\n            if (shouldRevalidate === void 0) { shouldRevalidate = true; }\n            if (dedupe === void 0) { dedupe = true; }\n            // update hook state\n            var newState = {};\n            var needUpdate = false;\n            if (typeof updatedData !== 'undefined' &&\n                !config.compare(stateRef.current.data, updatedData)) {\n                newState.data = updatedData;\n                needUpdate = true;\n            }\n            // always update error\n            // because it can be `undefined`\n            if (stateRef.current.error !== updatedError) {\n                newState.error = updatedError;\n                needUpdate = true;\n            }\n            if (typeof updatedIsValidating !== 'undefined' &&\n                stateRef.current.isValidating !== updatedIsValidating) {\n                newState.isValidating = updatedIsValidating;\n                needUpdate = true;\n            }\n            if (needUpdate) {\n                dispatch(newState);\n            }\n            if (shouldRevalidate) {\n                if (dedupe) {\n                    return softRevalidate();\n                }\n                else {\n                    return revalidate();\n                }\n            }\n            return false;\n        };\n        addRevalidator(FOCUS_REVALIDATORS, onFocus);\n        addRevalidator(RECONNECT_REVALIDATORS, onReconnect);\n        addRevalidator(CACHE_REVALIDATORS, onUpdate);\n        return function () {\n            // cleanup\n            dispatch = function () { return null; };\n            // mark it as unmounted\n            unmountedRef.current = true;\n            removeRevalidator(FOCUS_REVALIDATORS, onFocus);\n            removeRevalidator(RECONNECT_REVALIDATORS, onReconnect);\n            removeRevalidator(CACHE_REVALIDATORS, onUpdate);\n        };\n    }, [key, revalidate]);\n    useIsomorphicLayoutEffect(function () {\n        var timer = null;\n        var tick = function () { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(!stateRef.current.error &&\n                            (configRef.current.refreshWhenHidden ||\n                                configRef.current.isDocumentVisible()) &&\n                            (configRef.current.refreshWhenOffline || configRef.current.isOnline()))) return [3 /*break*/, 2];\n                        // only revalidate when the page is visible\n                        // if API request errored, we stop polling in this round\n                        // and let the error retry function handle it\n                        return [4 /*yield*/, revalidate({ dedupe: true })];\n                    case 1:\n                        // only revalidate when the page is visible\n                        // if API request errored, we stop polling in this round\n                        // and let the error retry function handle it\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        // Read the latest refreshInterval\n                        if (configRef.current.refreshInterval && timer) {\n                            timer = setTimeout(tick, configRef.current.refreshInterval);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        if (configRef.current.refreshInterval) {\n            timer = setTimeout(tick, configRef.current.refreshInterval);\n        }\n        return function () {\n            if (timer) {\n                clearTimeout(timer);\n                timer = null;\n            }\n        };\n    }, [\n        config.refreshInterval,\n        config.refreshWhenHidden,\n        config.refreshWhenOffline,\n        revalidate\n    ]);\n    // define returned state\n    // can be memorized since the state is a ref\n    var memoizedState = useMemo(function () {\n        var state = { revalidate: revalidate, mutate: boundMutate };\n        Object.defineProperties(state, {\n            error: {\n                // `key` might be changed in the upcoming hook re-render,\n                // but the previous state will stay\n                // so we need to match the latest key and data (fallback to `initialData`)\n                get: function () {\n                    stateDependencies.current.error = true;\n                    return keyRef.current === key ? stateRef.current.error : initialError;\n                },\n                enumerable: true\n            },\n            data: {\n                get: function () {\n                    stateDependencies.current.data = true;\n                    return keyRef.current === key ? stateRef.current.data : initialData;\n                },\n                enumerable: true\n            },\n            isValidating: {\n                get: function () {\n                    stateDependencies.current.isValidating = true;\n                    return key ? stateRef.current.isValidating : false;\n                },\n                enumerable: true\n            }\n        });\n        return state;\n        // `boundMutate` is immutable, and the immutability of `revalidate` depends on `key`\n        // so we can omit them from the deps array,\n        // but we put it to enable react-hooks/exhaustive-deps rule.\n        // `initialData` and `initialError` are not initial values\n        // because they are changed during the lifecycle\n        // so we should add them in the deps array.\n    }, [revalidate, initialData, initialError, boundMutate, key]);\n    // suspense\n    if (config.suspense) {\n        // in suspense mode, we can't return empty state\n        // (it should be suspended)\n        // try to get data and error from cache\n        var latestData = cache.get(key);\n        var latestError = cache.get(keyErr);\n        if (typeof latestData === 'undefined') {\n            latestData = initialData;\n        }\n        if (typeof latestError === 'undefined') {\n            latestError = initialError;\n        }\n        if (typeof latestData === 'undefined' &&\n            typeof latestError === 'undefined') {\n            // need to start the request if it hasn't\n            if (!CONCURRENT_PROMISES[key]) {\n                // trigger revalidate immediately\n                // to get the promise\n                // in this revalidate, should not rerender\n                revalidate();\n            }\n            if (CONCURRENT_PROMISES[key] &&\n                typeof CONCURRENT_PROMISES[key].then === 'function') {\n                // if it is a promise\n                throw CONCURRENT_PROMISES[key];\n            }\n            // it's a value, return it directly (override)\n            latestData = CONCURRENT_PROMISES[key];\n        }\n        if (typeof latestData === 'undefined' && latestError) {\n            // in suspense mode, throw error if there's no content\n            throw latestError;\n        }\n        // return the latest data / error from cache\n        // in case `key` has changed\n        return {\n            error: latestError,\n            data: latestData,\n            // revalidate will be deprecated in the 1.x release\n            // because mutate() covers the same use case of revalidate().\n            // This remains only for backward compatibility\n            revalidate: revalidate,\n            mutate: boundMutate,\n            isValidating: stateRef.current.isValidating\n        };\n    }\n    return memoizedState;\n}\nvar SWRConfig = SWRConfigContext.Provider;\nexport { trigger, mutate, SWRConfig };\nexport default useSWR;\n","import apiFetch from '@wordpress/api-fetch';\n\napiFetch.use((options, next)=>{\n    options.headers = {\n        ...(options.headers || {}),\n        [\"Block-X-Editor\"]: true,\n    }\n    return next(options);\n});\n\nimport './gutenberg/blocks/block-x.js'\nimport './gutenberg/auto/auto-ssr.js';","\nconst { select, dispatch } = require(\"@wordpress/data\");\nconst { STORE_NAME } = require(\"../data/store\")\n\nsetInterval(()=>{\n    const store = select(STORE_NAME);\n    if(store.isRequesting()){\n        return;\n    }\n    if(store.getQueue().length < 1){\n        return;\n    }\n    dispatch(STORE_NAME).fetchSSR(\n        select('core/editor').getCurrentPostId()\n    );\n}, 300)","import { registerBlockType } from '@wordpress/blocks'\nimport {InspectorControls} from '@wordpress/block-editor'\nimport {useEffect, useState} from \"@wordpress/element\";\nimport Panels from '../components/panels';\nimport BlockContext from '../components/BlockContext';\nimport ServerSideRenderQueue from '../components/ServerSideRenderQueue';\nimport {useBlock} from '../hooks/use-context.js';\nimport {useAutoSaveTimeout} from \"../hooks/use-settings\";\n\nconst BlockXComponents = window.BlockXComponents = {\n    ...(window.BlockXComponents || {}),\n    // expose so others can use it\n    ServerSideRenderQueue,\n    useBlock,\n};\n\nfor( const {id, title, category, registerBlockTypeArgs, contentStructure} of BlockX.blocks){\n\n    // ------------------------------\n    // build default values\n    // ------------------------------\n    const defaultValues = {};\n    for (const {defaultValue, key, options} of contentStructure) {\n        if(typeof defaultValue !== typeof undefined){\n            defaultValues[key] = defaultValue;\n        } else if(typeof options === typeof [] && options.length > 0 && typeof options[0].value === typeof \"\"){\n            defaultValues[key] = options[0].value;\n        }\n    }\n\n    // ------------------------------\n    // register block type\n    // ------------------------------\n    registerBlockType( id, {\n        ...registerBlockTypeArgs,\n        title,\n        category,\n        attributes: {\n            content:{\n                type: 'object',\n                default: defaultValues,\n            }\n        },\n        edit: (props) => {\n            const {className,  setAttributes, attributes} = props;\n\n            const autoSaveTimeout = useAutoSaveTimeout();\n\n            // for local state changes \n            const [localChangeState, setLocalChangeState] = useState({});\n            const changeLocalState = (key, value) => {\n                setLocalChangeState(_state => ({\n                    ...localChangeState,\n                    [key]: value,\n                }));\n            }\n\n            useEffect(()=>{\n                let timeoutId = null;\n                if(Object.keys(localChangeState).length !== 0 && autoSaveTimeout > 100){\n                    timeoutId = setTimeout(()=>{\n                        setContent({\n                            ...attributes.content,\n                            ...localChangeState,\n                        })\n                    }, autoSaveTimeout);\n                }\n                return ()=> clearTimeout(timeoutId);\n            }, [JSON.stringify(localChangeState)]);\n\n             // apply local changes to contents\n            const setContent = (content)=> {\n                setAttributes({content})\n                setLocalChangeState({})\n            }\n            \n            const Preview = BlockXComponents[id] || ServerSideRenderQueue;\n\n            return <>\n\n                <InspectorControls>\n                    <BlockContext \n                        blockId={id} \n                        contentStructure={contentStructure}\n                        defaultValues={defaultValues}\n                        attributes={attributes}\n                        content={attributes.content}\n                        setContent={setContent}\n                        changeLocalState={changeLocalState}\n                        localChanges={localChangeState}\n                    >\n                        <Panels\n                            definition={contentStructure}\n                            content={attributes.content}\n                            setContent={setContent}\n                        />\n                    </BlockContext>\n                </InspectorControls>\n\n                <div className={className}>\n                    <BlockContext \n                        blockId={id} \n                        contentStructure={contentStructure}\n                        defaultValues={defaultValues}\n                        attributes={attributes}\n                        content={attributes.content}\n                        setContent={setContent}\n                        changeLocalState={changeLocalState}\n                        localChanges={localChangeState}\n                    >\n                        <Preview\n                            block={id}\n                            attributes={attributes} // for ssr\n                            content={attributes.content} // for js preview\n                        />\n                    </BlockContext>\n                </div>\n\n            </>\n        },\n    });\n\n}","const { getBlockContext } = require(\"../utils/context\")\n\nconst BlockContext = ({\n    blockId, \n    contentStructure, \n    defaultValues,\n    attributes,\n    content, \n    setContent,\n    changeLocalState,\n    localChanges,\n    children\n})=>{\n    const Context = getBlockContext();\n    return <Context.Provider value={{\n        blockId,\n        contentStructure,\n        defaultValues,\n        attributes,\n        content,\n        setContent,\n        changeLocalState,\n        localChanges,\n        dirtyState:{\n            ...content,\n            ...localChanges,\n        },\n    }}>\n        {children}\n    </Context.Provider>\n}\n\nexport default BlockContext;","// extracted by mini-css-extract-plugin","\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Placeholder, Spinner } from \"@wordpress/components\";\nimport { RawHTML } from \"@wordpress/element\";\nimport { useIsInRenderQueue, useIsRequestingBlock, useSSR } from \"../hooks/use-store\";\nimport './ServerSideRenderQueue.css';\n\nconst LoadingWrapper = ({isLoading, children}) => {\n    return <div className=\"blockx--ssr__wrapper\">\n        {children}\n        {isLoading && <span className=\"loader\"><Spinner /></span>}\n    </div>\n}\n\nconst ServerSideRenderQueue = ({\n    block,\n    content,\n    attributes\n})=>{\n    if(typeof attributes === \"undefined\"){\n        // fallback to old behavior\n        console.warn(\"Using content attribute with ServerSideRenderQueue is deprecated. Please provide the complete attribute object of the block.\");\n        attributes = {content};\n    }\n    const html = useSSR(block, attributes);\n    const isRequesting = useIsRequestingBlock(block, attributes);\n    const isInRenderQueue = useIsInRenderQueue(block, attributes);\n    const isLoading = isRequesting || isInRenderQueue;\n\n    if( false === html ){\n        return <LoadingWrapper isLoading={isLoading}>;\n            <Placeholder>\n                {sprintf(__( 'Error loading block: %s'), block )}\n            </Placeholder>\n        </LoadingWrapper>\n    }\n\n    if(typeof html === typeof undefined) {\n        const msg = __( 'Block rendered as empty.' );\n        return <LoadingWrapper isLoading={isLoading}>\n            <Placeholder>\n                {!isLoading ? msg : __(\"Loading\")}\n            </Placeholder>\n        </LoadingWrapper>\n    }\n\n    return <LoadingWrapper isLoading={isLoading}>\n        <RawHTML key=\"html\">{html}</RawHTML>\n    </LoadingWrapper>\n\n}\n\nexport default ServerSideRenderQueue;","import widgets from \"./widgets\";\n\nconst ContentStructure = ({items, value, onChange})=>{\n\n    return items.map((item, index)=>{\n        if(typeof widgets[item.type] !== typeof undefined){\n            const Widget = widgets[item.type];\n            const _value = typeof value[item.key] !== typeof undefined ? value[item.key] : item.defaultValue\n            return <Widget\n                key={`${index}-${item.key}`}\n                definition={item}\n                value={_value}\n                onChange={(_value) => onChange(item.key, _value)}\n            />\n        }\n        return <p key={item.key}>Type <b>{item.type}</b> not implemented</p>\n    });\n}\n\nexport default ContentStructure;","import {Button, PanelBody} from \"@wordpress/components\";\nimport {useTranslation} from \"../hooks/use-translation\";\nimport ContentStructure from \"./content-structure\";\nimport {useBlock} from \"../hooks/use-context\";\n\nconst Panels = ({definition, content, setContent})=>{\n\n    const {\n        btn_apply_changes\n    } = useTranslation();\n\n    const {localChanges, changeLocalState} = useBlock()\n\n    const applyChanges = ()=>{\n        setContent({\n            ...content,\n            ...localChanges,\n        })\n    }\n\n    const handleApplyChangesClick = ()=> applyChanges()\n\n    // collect panels\n    const panels = [];\n    let activePanel = {\n        label: undefined,\n        opened: undefined,\n        contentStructure: [],\n    };\n    for(const item of definition){\n        if(item.type === \"panel\"){\n            panels.push({...activePanel})\n            panels.push({\n                label: item.label,\n                opened: item.opened,\n                contentStructure: item.contentStructure\n            })\n            activePanel.contentStructure = [];\n            continue;\n        }\n        activePanel.contentStructure.push(item)\n    }\n    if(activePanel.contentStructure.length > 0 ) panels.push(activePanel)\n\n    return <>\n        {panels.map((panel, panelIndex)=> <PanelBody\n            key={panelIndex}\n            title={panel.label}\n            initialOpen={panel.opened}\n        >\n            <ContentStructure\n                items={panel.contentStructure}\n                value={{\n                    ...content,\n                    ...localChanges\n                }}\n                onChange={(key, value)=>{\n                    changeLocalState(key, value)\n                }}\n            />\n        </PanelBody>\n        )}\n        <PanelBody>\n            <Button \n                isSecondary\n                disabled={Object.keys(localChanges).length === 0}\n                onClick={handleApplyChangesClick}\n            >\n                {btn_apply_changes}\n            </Button>\n        </PanelBody>\n    </>;\n}\n\nexport default Panels;","\nconst DividerWidget = ()=> <hr />;\n\nexport default DividerWidget;","\nconst HiddenWidget = ()=> null;\n\nexport default HiddenWidget;","// extracted by mini-css-extract-plugin","import {BaseControl, Button} from \"@wordpress/components\";\nimport ContentStructure from \"../content-structure\";\nimport './ListOfWidget.css';\n\nconst ListOfWidget = ({definition, value, onChange, ...rest})=> {\n    const onAdd = ()=>{\n        const newItem = {};\n        definition.contentStructure.forEach(widget=>{\n           newItem[widget.key] = definition?.defaultValues[widget.key];\n        });\n        onChange([\n            ...value,\n            newItem,\n        ])\n    }\n\n    const onClear = ()=>{\n        onChange([]);\n    }\n\n    const onChangeItem = (index, widgetKey, widgetValue)=>{\n        const newValue = [...value];\n        newValue[index][widgetKey] = widgetValue;\n        onChange(newValue);\n    }\n\n    const onSwitchPositions = (indexA, indexB) => {\n        onChange(value.map((item, index)=>{\n            if(index === indexA){\n                return {...value[indexB]};\n            }\n            if(index === indexB){\n                return {...value[indexA]};\n            }\n            return item;\n        }));\n    }\n\n    const onUp = (index)=> onSwitchPositions(index, index-1);\n    const onDown = (index)=> onSwitchPositions(index, index+1);\n\n    const onDeleteItem = (index)=>{\n        onChange(value.filter((item, i)=> i !== index ));\n    }\n\n    return <BaseControl\n        className=\"blockx-list-of-widget\"\n        label={definition.label}\n    >\n        <div className=\"blockx-list-of-widget__body\">\n        {value.map((instanceValue, index )=> {\n            return <div className=\"blockx-list-of-widget__item\" key={index}>\n                <div className=\"blockx-list-of-widget__item--control blockx-list-of-widget__item--control-top\">\n                    <Button\n                        icon=\"arrow-up\"\n                        isSecondary\n                        isSmall\n                        disabled={index === 0}\n                        onClick={()=>onUp(index)}\n                    >\n                        Up\n                    </Button>\n                </div>\n                <ContentStructure\n                    items={definition.contentStructure}\n                    value={instanceValue}\n                    onChange={(widgetKey, widgetValue)=>onChangeItem(index, widgetKey, widgetValue)}\n                />\n                <div className=\"blockx-list-of-widget__item--control blockx-list-of-widget__item--control-bottom\">\n                    <Button\n                        icon=\"arrow-down\"\n                        isSecondary\n                        isSmall\n                        disabled={index >= value.length-1}\n                        onClick={()=>onDown(index)}\n                    >\n                        Down\n                    </Button>\n                    <Button\n                        icon=\"trash\"\n                        isSecondary\n                        isSmall\n                        isDestructive\n                        disabled={value.length === 0}\n                        onClick={()=>onDeleteItem(index)}\n                    >\n                        Delete item\n                    </Button>\n                </div>\n            </div>\n        })}\n        </div>\n        <div className=\"blockx-list-of-widget__control\">\n            <Button\n                icon=\"plus\"\n                isSecondary\n                isSmall\n                onClick={onAdd}\n            >\n                Add list item\n            </Button>\n            <Button\n                icon=\"trash\"\n                isSecondary\n                isSmall\n                isDestructive\n                disabled={value.length === 0}\n                onClick={onClear}\n            >\n                Delete all items\n            </Button>\n        </div>\n    </BaseControl>\n}\n\nexport default ListOfWidget;","// extracted by mini-css-extract-plugin","import {Button} from \"@wordpress/components\";\nimport {MediaUpload, MediaUploadCheck} from '@wordpress/block-editor'\nimport {useTranslationWidgetMedia} from \"../../hooks/use-translation\";\nimport {useMedia} from \"../../hooks/use-media\";\nimport './MediaWidget.css';\n\nconst MediaPreviewWrapper = ({children, type = \"any\", isLoading = false}) => {\n    const loading = isLoading ? \"blockx-media-widget__preview--is-loading\" : \"\";\n    return <div className={`blockx-media-widget__preview--item blockx-media-widget__preview--${type} ${loading}`}>\n        {children}\n    </div>\n}\n\nconst MediaPreview = ({ID}) => {\n\n    const {\n        not_found,\n    } = useTranslationWidgetMedia();\n    const {media, isLoading} = useMedia(ID);\n\n    if (isLoading) {\n        return <MediaPreviewWrapper isLoading={true}>\n            <span\n                className=\"spinner is-active\"\n            />\n        </MediaPreviewWrapper>\n    }\n\n    if (media?.media_type === \"image\") {\n        if (!media?.media_details?.sizes?.thumbnail?.source_url) {\n            return <span className=\"blockx-media-widget__404\">{not_found}</span>;\n        }\n\n        return <MediaPreviewWrapper type=\"image\">\n            <img\n                src={media.media_details.sizes.thumbnail.source_url}\n            />\n        </MediaPreviewWrapper>\n    }\n\n    if (!media?.source_url) {\n        return <span className=\"blockx-media-widget__404\">{not_found}</span>;\n    }\n\n    const title = media?.title?.rendered ? media.title.rendered : media.source_url;\n\n    return <MediaPreviewWrapper>\n        <p><a href={media.source_url} target=\"_blank\">{title}</a></p>\n    </MediaPreviewWrapper>\n\n};\n\nconst MediaWidget = ({definition, value, onChange}) => {\n\n    const {\n        label,\n        mediaTypes,\n        multiple,\n        mediaUploadTitle\n    } = definition;\n\n    const {\n        no_permission,\n    } = useTranslationWidgetMedia();\n\n    const handleSelection = (value) => {\n        if (Array.isArray(value)) {\n            onChange(value.map(media => media.id));\n        } else {\n            onChange(value.id);\n        }\n    }\n\n    return <div className={`blockx-media-widget ${multiple ? \"blockx-media-widget__multiple\" : \"\"}`}>\n        <MediaUploadCheck\n            fallback={<p>${no_permission}</p>}\n        >\n            <div className=\"blockx-media-widget__control\">\n                <MediaUpload\n                    title={mediaUploadTitle.length > 0 ? mediaUploadTitle : undefined}\n                    allowedTypes={mediaTypes.length > 0 ? mediaTypes : undefined}\n                    multiple={multiple}\n                    gallery={false}\n                    value={value}\n                    onSelect={handleSelection}\n                    render={({open}) => {\n                        return <Button isSecondary onClick={() => open()}>\n                            {label}\n                        </Button>\n                    }}\n                />\n            </div>\n            <div className=\"blockx-media-widget__preview\">\n                {Array.isArray(value) ?\n                    value.map(id => <MediaPreview key={id} ID={id}/>)\n                    :\n                    <MediaPreview ID={value}/>\n                }\n            </div>\n\n        </MediaUploadCheck>\n    </div>\n};\n\nexport default MediaWidget;","import {TextControl} from \"@wordpress/components\";\n\nconst NumberWidget = ({definition, value, onChange})=> {\n    return <TextControl\n        label={definition.label}\n        value={value}\n        onChange={onChange}\n        type=\"number\"\n    />\n}\n\nexport default NumberWidget;","// extracted by mini-css-extract-plugin","import {BaseControl, Icon, Popover, Spinner, TextControl} from \"@wordpress/components\";\nimport { useState } from \"@wordpress/element\";\nimport { useEscapeKey } from \"../../hooks/use-utils.js\";\nimport { useFetchPosts, usePost } from \"../../hooks/use-posts\";\nimport './PostWidget.css'\n\nconst PostSearchResult = ({ID, post_title, onClick})=>{\n    return <div \n        className=\"blockx-post\"\n        onClick={onClick}\n        >\n        {post_title}<br />\n        <i className=\"description\">ID: {ID}</i>\n    </div>\n}\n\nconst SearchPost = ({label, post_types, post_status, use_context, onFound})=>{\n\n    const [state, setState] = useState(\"\")\n    const [isVisible, setIsVisible] = useState(false)\n\n    const {posts, isLoading} = useFetchPosts(state, post_types, post_status, use_context)\n\n    useEscapeKey(()=>{\n        setIsVisible(false)\n    }, [isVisible], isVisible)\n\n    return <BaseControl className=\"blockx--search-post\">\n        <div className=\"blockx--search-posts__input-wrapper\">\n            <TextControl\n                label={label}\n                value={state}\n                onChange={(value)=>{\n                    setIsVisible(true)\n                    setState(value);\n                }}\n                onFocus={()=>setIsVisible(true)}\n            />\n            {isLoading && (<span \n                className=\"blockx--search-post__spinner-wrapper\"\n            ><Spinner/></span>)}\n        </div>\n        \n        { isVisible ? (\n            <Popover \n                focusOnMount={false}\n                position=\"bottom center\"\n            >\n                <div className=\"blockx--search-post__popover\">\n\n\n                {posts.length > 0 ? \n                    posts.map(post=> <PostSearchResult \n                            key={post.ID}\n                            {...post} \n                            onClick={()=>onFound(post.ID)} \n                        />\n                    )\n                    :\n                    <p className=\"blockx--search-post__no-results\">{isLoading ? \"Searching...\" : \"No posts found.\"}</p>\n                }\n                </div>\n            </Popover>\n        ) : null}\n    </BaseControl>\n}\n\nconst LockedPost = ({label,post_id, onUnlock})=>{\n\n    const {post} = usePost(post_id)\n\n    const {\n        post_title = post_id\n    } = post;\n\n    return <BaseControl\n        className=\"blockx--locked-post\"\n    >\n        <TextControl\n            label={label}\n            value={post_title}\n            readOnly={true}\n        />\n        <span className=\"blockx--locked-post__icon\" onClick={onUnlock} >\n            <Icon icon=\"no\" />\n        </span>\n    </BaseControl>\n}\n\nconst PostWidget = ({definition, value, onChange, instance})=> {\n\n    if(!value){\n        return <SearchPost\n            label={definition.label}\n            post_types={definition.post_types} \n            post_status={definition.post_status}\n            use_context={definition.use_context}\n            instance={instance}\n            onFound={onChange}\n        />\n    }\n    \n    return <LockedPost\n        label={definition.label}\n        post_id={value}\n        onUnlock={()=>onChange(\"\")}\n    />\n}\n\nexport default PostWidget;","import {TextControl} from \"@wordpress/components\";\n\nconst ReadonlyWidget = ({definition, value})=> {\n    return <TextControl\n        label={definition.label}\n        type=\"text\"\n        readOnly\n        value={value}\n    />\n}\n\nexport default ReadonlyWidget;","import {SelectControl} from \"@wordpress/components\";\n\nconst SelectWidget = ({definition, value, onChange})=> {\n\n    const {\n        label,\n        options,\n    } = definition;\n\n    return <SelectControl\n        label={label}\n        value={value}\n        onChange={onChange}\n        options={options}\n    />\n}\n\nexport default SelectWidget;","import { Button, SelectControl, ToggleControl, FormTokenField, BaseControl } from \"@wordpress/components\";\nimport { useEffect } from \"@wordpress/element\";\nimport { useFetchTaxonomyTerms } from \"../../hooks/use-taxonomy.js\";\nimport { useTranslationWidgetTaxQuery } from '../../hooks/use-translation.js'\nimport { buildOption } from \"../../utils/select.js\";\n\nconst findTermByName = (name, terms) => terms.find(_t=>_t.name === name);\nconst findTermBySlug = (slug, terms) => terms.find(_t => _t.slug === slug);\nconst findTermById = (id, terms) => terms.find(_t => _t.id === id);\nconst findTerm = (s, terms) =>findTermById(s, terms) || findTermBySlug(s, terms) || findTermByName(s, terms);\n\nconst ConditionControl = ({taxonomies, value, onChange}) => {\n    const {taxonomy = taxonomies[0], termIds = [], operator = \"OR\"} = value;\n    const {\n        label_taxonomy,\n        label_add_terms,\n        label_operator,\n    } = useTranslationWidgetTaxQuery();\n    const taxonomyTerms = useFetchTaxonomyTerms(taxonomy);\n\n    // ------------------------------------------------\n    // auto select default taxonomy effect\n    // ------------------------------------------------\n    useEffect(()=>{\n        if(!taxonomies.map(tax=>tax.value).includes(taxonomy)){\n            onChange({\n                ...value,\n                taxonomy: taxonomies[0].value,\n            })\n        }\n    }, [taxonomy, taxonomies])\n\n    // ------------------------------------------------\n    // taxonomy token field changed\n    // ------------------------------------------------\n    const handleChangeTerms = (_terms)=>{\n        const newTerms = _terms.map(t=>{\n            const search = typeof t === typeof \"\" ? t : t.value;\n            const _term = findTerm(search, taxonomyTerms);\n            return _term ? _term.id : search;\n        })\n        onChange({\n            ...value,\n            termIds:newTerms\n        })\n    }\n\n    return <>\n        <div>\n            <SelectControl\n                label={label_taxonomy}\n                options={taxonomies}\n                value={taxonomy}\n                onChange={(taxonomy)=>onChange({\n                    ...value,\n                    taxonomy\n                })}\n            />\n        </div>\n        <div>\n            <FormTokenField\n                label={label_add_terms}\n                value={termIds.map(t=>{\n                    const taxonomyTerm = findTerm(t, taxonomyTerms)\n                    return taxonomyTerm ? taxonomyTerm.name : t;\n                    \n                })}\n                suggestions={taxonomyTerms.map(t=>(t.name))}\n                onChange={handleChangeTerms}\n            />\n        </div>\n        <div>\n            <SelectControl \n                label={label_operator}\n                value={operator}\n                options={['IN', 'NOT IN', 'AND' ].map(i=> buildOption(i,i))}\n                onChange={(_operator)=>{\n                    onChange({\n                        ...value,\n                        operator: _operator,\n                    })\n                }}\n            />\n        </div>\n    </>\n}\n\nconst ConditionWrapper = ({children})=>{\n    return <div\n        style={{\n            background: \"rgba(0, 0, 0, 0.02)\",\n            padding: 8,\n            border: \"1px solid rgba(0, 0, 0, 0.1)\",\n            borderRadius: 4,\n            marginBottom: 5,\n            marginLeft: -10,\n            marginRight: -10,\n        }}\n    >\n        {children}\n    </div>\n}\n\nconst ConditionGroup = ({taxonomies, value, onChange})=>{\n\n    const {\n        toggle_AND_description,\n        toggle_OR_description,\n        btn_add_taxonomy,\n        btn_delete_taxonomy,\n    } = useTranslationWidgetTaxQuery()\n\n    const {taxonomies: tax = [], relation = \"OR\"} = value;\n    \n    const handleChange = (_value)=> onChange(_value.taxonomies.length >= 1 ? _value : undefined);\n\n    return <div>\n        <div>\n            {tax.map((_tax, i)=>{\n                return <ConditionWrapper key={i}>\n                    <ConditionControl\n                        taxonomies={taxonomies}\n                        value={_tax}\n                        onChange={(changedTax)=>{\n                            handleChange({\n                                ...value,\n                                taxonomies: tax.map((c, j)=> i === j ? changedTax : c)\n                            })\n                        }}\n                    />\n                    <Button \n                        isDestructive\n                        isSmall\n                        onClick={()=>{\n                            handleChange({\n                                ...value,\n                                taxonomies: tax\n                                    .map((c,j)=> j === i ? null : c)\n                                    .filter(c=>c!=null)\n                            })\n                        }}\n                    >\n                        {btn_delete_taxonomy}\n                    </Button>\n                </ConditionWrapper>\n            })}\n            {tax.length > 1 ?\n                <div\n                style={{\n                    marginTop: 10,\n                }}\n                >\n                    <ToggleControl \n                        label={relation}\n                        help={relation === \"AND\" ? toggle_AND_description: toggle_OR_description}\n                        checked={relation === \"AND\"}\n                        onChange={(checked)=>{\n                            handleChange({\n                                ...value,\n                                relation: checked ? \"AND\" : \"OR\",\n                            })\n                        }}\n                    />\n                </div>\n                :\n                null\n            }\n        </div>\n        <Button \n            isSecondary\n            isSmall\n            onClick={()=>{\n                handleChange({\n                    relation,\n                    taxonomies: [\n                        ...tax,\n                        {}\n                    ]\n                })\n            }}\n            style={{\n                width: \"100%\",\n                textAlign:\"center\",\n                display: \"inline-block\"\n            }}\n        >\n            {btn_add_taxonomy}\n        </Button>\n    </div>\n}\n\n\nconst TaxQueryWidget = ({definition, value, onChange})=> {\n    return <BaseControl \n        label={definition.label}\n    >\n        <ConditionGroup \n            taxonomies={definition.taxonomies}\n            value={value}\n            onChange={onChange}\n        />\n    </BaseControl>\n}\n\nexport default TaxQueryWidget;","import {SelectControl} from \"@wordpress/components\";\nimport { useFetchTaxonomyTermsAsOptionsWithDefaultAny } from \"../../hooks/use-taxonomy\";\n\nconst TaxonomyTerm = ({definition, value, onChange})=> {\n\n    const {\n        label,\n        taxonomy,\n    } = definition;\n    \n    const taxonomyTermOptions = useFetchTaxonomyTermsAsOptionsWithDefaultAny(taxonomy);\n\n    // mutliple with checkbox control!\n    // https://developer.wordpress.org/block-editor/components/checkbox-control/\n\n    return <SelectControl\n        label={label}\n        value={value}\n        onChange={onChange}\n        options={taxonomyTermOptions}\n    />\n}\n\nexport default TaxonomyTerm;","import {TextareaControl, TextControl} from \"@wordpress/components\";\n\nconst TextWidget = ({definition, value, onChange})=> {\n\n    if(typeof definition.rows !== 'number' || definition.rows === 1){\n        return <TextControl\n            label={definition.label}\n            value={value}\n            onChange={onChange}\n            help={definition.help}\n        />\n    }\n\n    return <TextareaControl\n        label={definition.label}\n        value={value}\n        onChange={onChange}\n        rows={definition.rows}\n        help={definition.help}\n    />\n}\n\nexport default TextWidget;","import TextWidget from \"./TextWidget\";\n\nconst TextareaWidget = (props)=> <TextWidget {...props} />\n\nexport default TextareaWidget;","import { ToggleControl} from \"@wordpress/components\";\n\nconst getStateLabel = (label, isOn)=>{\n    return typeof label === typeof {} ? (isOn ? label.on : label.off) : typeof label === typeof \"\" ? label : null;\n}\n\nconst ToggleWidget = ({definition, value, onChange})=> {\n    const {\n        label,\n        help,\n    } = definition;\n    \n    return <ToggleControl\n        label={getStateLabel(label, value)}\n        help={getStateLabel(help, value)}\n        checked={value}\n        onChange={onChange}\n    />\n}\n\nexport default ToggleWidget;","\nimport NumberWidget from './NumberWidget.js'\nimport PostWidget from './PostWidget.js';\nimport SelectWidget from './SelectWidget.js';\nimport TaxQueryWidget from './TaxQueryWidget.js';\nimport TaxonomyTermWidget from './TaxonomyTermWidget.js';\nimport TextWidget from './TextWidget.js';\nimport TextareaWidget from \"./TextareaWidget\";\nimport ToggleWidget from './ToggleWidget.js';\nimport HiddenWidget from './HiddenWidget.js';\nimport DividerWidget from './DividerWidget.js';\nimport ReadonlyWidget from './ReadonlyWidget.js';\nimport MediaWidget from \"./MediaWidget\";\nimport ListOfWidget from \"./ListOfWidget\";\n\nconst widgets = {\n    text: TextWidget,\n    textarea: TextareaWidget,\n    number: NumberWidget,\n    toggle: ToggleWidget,\n    select: SelectWidget,\n    taxonomy_term: TaxonomyTermWidget,\n    tax_query: TaxQueryWidget,\n    post: PostWidget,\n    hidden: HiddenWidget,\n    divider: DividerWidget,\n    readonly: ReadonlyWidget,\n    media: MediaWidget,\n    list_of: ListOfWidget,\n}\n\nexport default widgets;","import apiFetch from \"@wordpress/api-fetch\";\nimport { registerStore } from \"@wordpress/data\";\n\n// ---------------------------------------------\n// caching\n// ---------------------------------------------\nconst SSR_CACHE_KEY = \"blockx-ssr-cache\";\nconst SSR_CACHE_TIMESTAMPS_KEY = \"blockx-ssr-cache-timestamps\";\n\nconst getExpiredCache = ()=>{\n    return JSON.parse(localStorage.getItem(SSR_CACHE_TIMESTAMPS_KEY) || \"{}\")\n}\nconst setExpiredCache = (map) => {\n    return localStorage.setItem(SSR_CACHE_TIMESTAMPS_KEY,  JSON.stringify(map));\n}\nconst setCache = (blocks, expiresInSeconds = 300) => {\n    const map = getExpiredCache();\n    const now = Date.now();\n    for(const hash in blocks){\n        map[hash] = now + 1000 * expiresInSeconds;\n    }\n    setExpiredCache(map);\n    localStorage.setItem(SSR_CACHE_KEY, JSON.stringify(blocks));\n}\nconst getCache = () => {\n    return JSON.parse(localStorage.getItem(SSR_CACHE_KEY) || \"{}\");\n}\n\n// cleanup expired caches\nconst expiredMap = getExpiredCache();\nconst now = Date.now();\nfor(const hash in expiredMap) {\n    if(expiredMap[hash] < now){\n        delete expiredMap[hash];\n    }\n    setExpiredCache(expiredMap);\n}\n\nconst validHashes = Object.keys(expiredMap);\nconst blocksCache = getCache();\nfor(const hash in blocksCache) {\n    if(!validHashes.includes(hash)){\n        delete blocksCache[hash];\n    }\n}\nsetCache(blocksCache);\n\n// ---------------------------------------------\n// default store state\n// ---------------------------------------------\nconst getHash = (blockId, attributes) => btoa(`${blockId}-${JSON.stringify(attributes)}`);\n\nconst DEFAULT_STATE = {\n    isRequesting: false,\n    blocks: getCache(),\n    queue: {},\n};\n\n// ---------------------------------------------\n// api actions\n// ---------------------------------------------\nconst SSR_FETCH = (post_id, blocks)=>({\n    type: 'SSR_FETCH',\n    path: `/blockx/v1/ssr`,\n    data: { \n        post_id,\n        blocks \n    }\n});\n\n// ---------------------------------------------\n// action generators\n// ---------------------------------------------\nconst actionNone = ()=> ({type:'none'})\nconst ACTION_SET_IS_REQUESTING = 'SET_IS_REQUESTING';\nconst actionIsRequesting = (isRequesting) => ({type: ACTION_SET_IS_REQUESTING, isRequesting});\nconst ACTION_ADD_TO_QUEUE = \"ADD_TO_QUEUE\";\nconst actionAddToQueue = (hash, block) => ({type: ACTION_ADD_TO_QUEUE, hash, block});\nconst ACTION_REMOVE_FROM_QUEUE = \"REMOVE_FROM_QUEUE\";\nconst actionRemoveFromQueue = (hashes) => ({type: ACTION_REMOVE_FROM_QUEUE, hashes});\nconst ACTION_SET_BLOCKS = 'SET_BLOCKS';\nconst actionSetBlocks = (renderedBlocks) => ({type: ACTION_SET_BLOCKS, blocks: renderedBlocks});\n\n// ---------------------------------------------\n// public actions that can be used with dispatch\n// ---------------------------------------------\nconst actions = {\n    \n    addToQueue: (blockId, attributes)=>{\n        const block = {\n            id: blockId,\n            attributes,\n        };\n        return actionAddToQueue(getHash(blockId, attributes), block);\n    },\n\n    * fetchSSR(post_id){\n\n        // check queue\n        const queue = store.getState().queue;\n        if(Object.keys(queue).length < 1){\n            return actionNone();\n        }\n\n        // fetch blocks from queue\n        yield actionIsRequesting(true);\n        const result = yield SSR_FETCH(post_id, queue);\n        yield actionSetBlocks(result);\n        \n        // remove fetched blocks from queue\n        yield actionRemoveFromQueue(Object.keys(queue));\n\n        return actionIsRequesting(false);\n    },\n}\n\n// ------------------------------------------------------\n// register our custom store\n// ------------------------------------------------------\nexport const STORE_NAME = 'block-x';\nconst store = registerStore( STORE_NAME, {\n    // ------------------------------------------------------\n    // reduce actions to new state\n    // ------------------------------------------------------\n    reducer( state = DEFAULT_STATE, action  ) {\n        switch ( action.type ) {\n            case ACTION_SET_IS_REQUESTING:\n                return {\n                    ...state,\n                    isRequesting: action.isRequesting,\n                }\n            case ACTION_SET_BLOCKS:\n                const blocks = {\n                    ...state.blocks,\n                    ...action.blocks,\n                };\n                setCache(blocks);\n                return {\n                    ...state,\n                    blocks,\n                }\n            case ACTION_ADD_TO_QUEUE:\n                return {\n                    ...state,\n                    queue:{\n                        ...state.queue,\n                        [action.hash]: action.block,\n                    }\n                }\n            case ACTION_REMOVE_FROM_QUEUE:\n                return {\n                    ...state,\n                    queue: Object\n                            .keys(state.queue)\n                            .filter(hash=> !action.hashes.includes(hash))\n                            .map(hash=> state.queue[hash]),\n                }\n        }\n        return state;\n    },\n    // ------------------------------------------------------\n    // public actions that can be used with dispatch\n    // ------------------------------------------------------\n    actions,\n\n    // ------------------------------------------------------\n    // selectors that can be used with select\n    // ------------------------------------------------------\n    selectors: {\n        isRequesting(state, blockId, attributes){\n            // is requesting something\n            if(typeof blockId === typeof undefined || typeof attributes === typeof undefined){\n                return state.isRequesting;\n            }\n            // is requesting specific block configuration\n            return state.isRequesting && typeof state.queue[getHash(blockId, attributes)] !== typeof undefined;\n        },\n        isInQueue(state, blockId, attributes) {\n            return typeof state.queue[getHash(blockId, attributes)] !== typeof undefined;\n        },\n        getQueue(state){\n            return Object.values(state.queue);\n        },\n        getBlocks(state){\n            return state.blocks;\n        },\n        getBlock(state, blockId, attributes){\n            return state.blocks[getHash(blockId, attributes)];\n        },\n    },\n    // ----------------------------------------------------------------\n    //  controls will be executed as side effects of generator actions\n    // ----------------------------------------------------------------\n    controls: {\n        SSR_FETCH(action){\n            return apiFetch({path:action.path, data:action.data, method: \"POST\"})\n        },\n    },\n});","import {useContext} from 'react'\nimport { getBlockContext } from '../utils/context'\n\nexport const useBlock = ()=> useContext(getBlockContext());","import apiFetch from \"@wordpress/api-fetch\";\nimport useSWR from 'swr';\n\n//----------------------------------------\n// fetch single post\n//----------------------------------------\nconst mediaCache = {};\nconst mediaFetcher = async (ID)=>{\n\n    if(typeof ID === typeof \"\" && ID.length === 0) return null;\n    if(typeof ID === typeof 1 && ID <= 0 ) return null;\n\n    const cachedMedia = mediaCache[ID];\n    if(typeof cachedMedia === typeof {} && typeof cachedMedia.type !== typeof undefined) return cachedMedia;\n\n    const media = await apiFetch({path:\"/wp/v2/media/\"+ID});\n\n    if(typeof media === typeof {} && media.id === ID){\n        cachedMedia[ID] = {\n            ...(cachedMedia[ID] || {}),\n            ...media,\n        }\n    }\n    return media;\n}\nexport const useMedia = (ID)=>{\n    // fetch!\n    const {data, error} = useSWR(ID, mediaFetcher);\n    return {\n        media: data || {},\n        isLoading: !error && !data,\n    }\n}","import apiFetch from \"@wordpress/api-fetch\";\nimport useSWR from 'swr'\nimport { useBlock } from \"./use-context.js\";\nimport { useDebounce } from './use-utils.js'\n\n//----------------------------------------\n// fetch single post\n//----------------------------------------\nconst postsCache = {};\nconst postFetcher = async (ID)=>{\n    const cachedPost = postsCache[ID];\n    if(typeof cachedPost === typeof {} && typeof cachedPost.post_title !== typeof undefined) return cachedPost;\n\n    const post = await apiFetch({path:\"/blockx/v1/get/\"+ID});\n    if(typeof post === typeof {} && post.ID){\n        postsCache[ID] = {\n            ...(postsCache[ID] || {}),\n            ...post,\n        }\n    }\n    return post;    \n}\nexport const usePost = (ID)=>{\n\n    // fetch!\n    const {data, error} = useSWR(ID, postFetcher);\n    return {\n        post: data || {},\n        isLoading: !error && !data,\n    }\n}\n\n//----------------------------------------\n// query for posts\n//----------------------------------------\nconst postsQueryCache = {};\nconst postsQueryFetcher = (data) => async () => {\n    // do not execute empty search\n    if(data.length === 0) return [];\n\n    // build url path\n    const path = `/blockx/v1/query`\n    const cacheKey = JSON.stringify(data);\n    if(typeof postsQueryCache[cacheKey] === typeof []) return postsQueryCache[cacheKey];\n\n    // execute query and cache results\n    const posts = await apiFetch({\n        method: 'POST',\n        path,\n        data,\n    })\n    postsQueryCache[cacheKey] = posts;\n    for(const post of posts){\n        postsCache[post.ID] = post;\n    }\n\n    return posts;\n}\n\nconst buildQueryParams = (search, post_types, post_status, instance) => {\n    return {\n        s: search,\n        post_type: post_types.join(','),\n        post_status: post_status.join(','),\n        block_instance: instance,\n    }\n}\n\nexport const useFetchPosts = (s, post_types, post_status, use_context)=>{\n    \n    const {blockId, dirtyState} = useBlock();\n    const debounced = useDebounce(s, 600);\n\n    const context = use_context ? {blockId, content: dirtyState} : {blockId};\n    const queryParams = buildQueryParams(debounced, post_types, post_status, {...context});\n\n    const query = JSON.stringify(queryParams);\n    const {data, error} = useSWR(query, postsQueryFetcher(queryParams));\n    return {\n        posts: data || [],\n        isLoading: !error && !data,\n    }\n}\n\n","\nexport const useSettings = () => {\n    return BlockX.settings;\n}\n\nexport const useAutoSaveTimeout = ()=>{\n    return useSettings().auto_save_timeout;\n}","import { STORE_NAME } from \"../data/store.js\";\nimport { useDispatch, useSelect } from \"@wordpress/data\";\nimport { useEffect } from \"@wordpress/element\";\n\nconst useSelectStore = (selector, deps = []) => useSelect(select=> selector(select(STORE_NAME)), deps);\nconst useStoreDispatch = () => useDispatch(STORE_NAME);\n\nexport const useIsRequesting = ()=>{\n    return useSelectStore(state=> state.isRequesting(), []);\n}\n\nexport const useIsInRenderQueue = (blockId, attributes)=>{\n    return useSelectStore(state => state.isInQueue(blockId, attributes), [blockId, attributes]);\n}\n\nexport const useIsRequestingBlock = (blockId, attributes)=>{\n    return useSelectStore(state => state.isRequesting(blockId, attributes), [blockId, attributes])\n}\n\nexport const useSSR = (blockId, attributes)=>{\n    const html = useSelectStore(state => state.getBlock(blockId, attributes), [blockId, attributes]);\n    const dispatch = useStoreDispatch();\n    useEffect(()=>{\n        dispatch.addToQueue(blockId, attributes);\n    }, [blockId, JSON.stringify(attributes)]);\n    return html;\n}","import { useSelect } from '@wordpress/data';\nimport { buildOption } from '../utils/select';\nimport { useTranslation } from './use-translation';\n\nexport const useFetchTaxonomyTerms = (taxonomy)=>{\n    return useSelect(select=> select('core').getEntityRecords('taxonomy', taxonomy, {\n            per_page: -1,\n        }) || [], [taxonomy])\n}\n\nexport const useFetchTaxonomyTermsAsOptionsWithDefaultAny = (taxonomy)=>{\n    const terms = useFetchTaxonomyTerms(taxonomy);\n    const {\n        term_select_any\n    } = useTranslation();\n    return [\n        buildOption(\"\", term_select_any),\n        ...terms.map(({name, id})=>buildOption(id, name)),\n    ]\n}","\nexport const useTranslation = (component) => {\n    return typeof component === typeof \"\" ? BlockX.i18n[component] : BlockX.i18n;\n}\n\nexport const useTranslationWidgetTaxQuery = ()=>{\n    return useTranslation(\"widget_tax_query\");\n}\n\nexport const useTranslationWidgetMedia = ()=>{\n    return useTranslation(\"widget_media\");\n}","import { useEffect, useState } from \"@wordpress/element\";\n\nexport const useDebounce = (value, delay) => {\n    const [debouncedValue, setDebouncedValue] = useState(value);\n    useEffect(() => {\n        const handler = setTimeout(() => {\n            setDebouncedValue(value);\n        }, delay);\n        return () => {\n            clearTimeout(handler);\n        };\n    }, [value, delay]);\n    return debouncedValue;\n}\n\nexport const useEscapeKey = (callback, dependencies = [], enabled = true)=>{\n\n    useEffect(()=>{\n        \n        if(!enabled) return;\n\n        const onKeyDown = ({key})=>{\n            if(key === \"Escape\") callback();\n        }\n        window.addEventListener('keydown', onKeyDown);\n        return ()=>{\n            window.removeEventListener('keydown', onKeyDown);\n        }\n    }, dependencies)\n}","\nconst Contexts = {};\n\nconst getContext = (name, initValue = \"\")=>{\n    if(typeof Contexts[name] === typeof undefined){ \n        Contexts[name] = React.createContext(initValue);\n    }\n    return Contexts[name];\n}\n\nexport const getBlockContext = ()=> getContext(\"block\");","\nexport const buildOption = (value, label) => ({value, label});","(function() { module.exports = window[\"regeneratorRuntime\"]; }());","(function() { module.exports = window[\"wp\"][\"apiFetch\"]; }());","(function() { module.exports = window[\"wp\"][\"blockEditor\"]; }());","(function() { module.exports = window[\"wp\"][\"blocks\"]; }());","(function() { module.exports = window[\"wp\"][\"components\"]; }());","(function() { module.exports = window[\"wp\"][\"data\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());","(function() { module.exports = window[\"wp\"][\"i18n\"]; }());","(function() { module.exports = window[\"React\"]; }());"],"sourceRoot":""}